{"remainingRequest":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/babel-loader/lib/index.js!/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/src/views/Review.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/src/views/Review.vue","mtime":1680535123944},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1680535122212},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/babel-loader/lib/index.js","mtime":1680535122151},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1680535122212},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1680535123815}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9iaXl1bnRpYW4vRGVza3RvcC9zb2Z0d2FyZSBlbmdpbmVlcmluZy9naXQvbGFiXzMvbGFiMy9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdidWxtYS10b2FzdCc7CmltcG9ydCBTaG9wQm94IGZyb20gJ0AvY29tcG9uZW50cy9TaG9wQm94JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdSZXZpZXcnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG9wczogW10sCiAgICAgIHNob3BfaWQ6ICcnLAogICAgICBhcHByb3ZlZDogJycsCiAgICAgIHBhZ2VfbnVtOiAxLAogICAgICBlcnJvcnM6IFtdCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgU2hvcEJveDogU2hvcEJveAogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGRvY3VtZW50LnRpdGxlID0gJ1Jldmlldyc7CiAgICB0aGlzLmdldFBybygpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0UHJvOiBmdW5jdGlvbiBnZXRQcm8oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBmb3JtRGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRJc0xvYWRpbmcnLCB0cnVlKTsKCiAgICAgICAgICAgICAgICBmb3JtRGF0YSA9IHsKICAgICAgICAgICAgICAgICAgYXV0aG9yaXplOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRob3JpemUnKSB8fCAne30nKSwKICAgICAgICAgICAgICAgICAgcGFnZV9udW06IF90aGlzLnBhZ2VfbnVtLAogICAgICAgICAgICAgICAgICByZXZpZXc6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhvcml6ZScpIHx8ICd7fScpLnVzZXJuYW1lID09ICdhZG1pbicKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBheGlvcy5wb3N0KCcvYXBpL3Nob3AnLCBmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICBfdGhpcy5zaG9wcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YS5zaG9wcykpOwogICAgICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoJ3NldElzTG9hZGluZycsIGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHJlbGVhc2U6IGZ1bmN0aW9uIHJlbGVhc2UoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5lcnJvcnMgPSBbXTsKICAgICAgdmFyIGZvcm1EYXRhID0gewogICAgICAgIGF1dGhvcml6ZTogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aG9yaXplJykgfHwgJ3t9JyksCiAgICAgICAgc2hvcF9pZDogdGhpcy5zaG9wX2lkLAogICAgICAgIGFwcHJvdmVkOiB0aGlzLmFwcHJvdmVkCiAgICAgIH07CiAgICAgIGF4aW9zLnBvc3QoJy9hcGkvc2hvcC9hcHByb3ZhbCcsIGZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICB0b2FzdCh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfllYblupflrqHmoLjpgJrov4fvvIEnLAogICAgICAgICAgICB0eXBlOiAnaXMtc3VjY2VzcycsCiAgICAgICAgICAgIGRpc21pc3NpYmxlOiB0cnVlLAogICAgICAgICAgICBwYXVzZU9uSG92ZXI6IHRydWUsCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwLAogICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1yaWdodCcKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0b2FzdCh7CiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLnN0YXR1cywKICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgICBkaXNtaXNzaWJsZTogdHJ1ZSwKICAgICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgICAgICAgcG9zaXRpb246ICdib3R0b20tcmlnaHQnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgLy8gZm9yIChjb25zdCBwcm9wZXJ0eSBpbiBlcnJvci5yZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAvLyB0aGlzLmVycm9ycy5wdXNoKGAke3Byb3BlcnR5fTogJHtlcnJvci5yZXNwb25zZS5kYXRhW3Byb3BlcnR5XX1gKQogICAgICAgICAgX3RoaXMyLmVycm9ycy5wdXNoKGVycm9yLnJlc3BvbnNlLmRhdGEpOyAvLyB9CgoKICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGVycm9yLnJlc3BvbnNlKSk7CiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlKSB7CiAgICAgICAgICBfdGhpczIuZXJyb3JzLnB1c2goJ1NvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluJyk7CgogICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZXJyb3IucmVzcG9uc2UpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/src/views/Review.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"home\">\n      <div class=\"columns\">\n      <div class=\"column\">\n      <form @submit.prevent=\"getPro\">\n            <div class=\"column is-4 is-offset-4\">          \n            <div class=\"field\">\n                <label>页面</label>\n                <div class=\"control\">\n                    <input type=\"text\" class=\"input\" v-model=\"page_num\">\n                </div>\n            </div>\n            <div class=\"field\">\n                <div class=\"control\">\n                    <button class=\"button is-dark\" @click=\"getPro\">搜索！</button>\n                </div>\n            </div>\n        </div> \n        </form>\n      </div>\n      <div class=\"column\">\n      <form @submit.prevent=\"release\">\n            <div class=\"column is-4 is-offset-4\">          \n            <div class=\"field\">\n                <label>Shop ID</label>\n                <div class=\"control\">\n                    <input type=\"text\" class=\"input\" v-model=\"shop_id\">\n                </div>\n            </div>\n            <div class=\"field\">\n                <div class=\"control\">\n                    <button :style=\"{ marginRight: '10px' }\" @click=\"approved = true\">批准开店！</button>\n                    <button @click=\"approved = false\">拒绝请求</button>\n                </div>\n            </div>\n            <div class=\"notification is-danger\" v-if=\"errors.length\">\n                        <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n            </div>\n\n        </div> \n        </form>\n      </div>\n      </div>\n      <div class=\"columns is-multiline\">\n        <ShopBox \n          v-for=\"shop in shops\"\n          v-bind:key=\"shop.id\"\n          v-bind:shop=\"shop\" />\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import axios from 'axios'\n  import { toast } from 'bulma-toast'\n  import ShopBox from '@/components/ShopBox'\n  export default {\n    name: 'Review',\n    data() {\n        return {\n            shops: [],\n            shop_id: '',\n            approved: '',\n            page_num: 1,\n            errors: [],\n        }\n    },\n    components: {\n      ShopBox\n    },\n    mounted() {\n      document.title = 'Review'\n      this.getPro() \n    },\n  methods: {\n    async getPro() {\n      this.$store.commit('setIsLoading', true)\n      var formData =  {\n          authorize: JSON.parse(localStorage.getItem('authorize') || '{}'),\n          page_num: this.page_num, \n          review: JSON.parse(localStorage.getItem('authorize') || '{}').username == 'admin'\n      }\n      axios\n          .post('/api/shop', formData)\n          .then(response => {\n              console.log(response)\n                this.shops = JSON.parse(JSON.stringify((response.data.shops)))\n          })\n        .catch(error => {\n          console.log(error)\n        })\n\n      this.$store.commit('setIsLoading', false)\n        },\n      release() {\n          this.errors=[]\n          var formData =  {\n              authorize: JSON.parse(localStorage.getItem('authorize') || '{}'),\n              shop_id: this.shop_id,\n              approved: this.approved,\n          }\n          axios\n                      .post('/api/shop/approval', formData)\n                      .then(response => {\n                          if (response.status == 200){\n                              \n                              toast({\n                              message: '商店审核通过！',\n                              type: 'is-success',\n                              dismissible: true,\n                              pauseOnHover: true,\n                              duration: 2000,\n                              position: 'bottom-right',\n                              \n                          })\n                          } else{\n                              toast({\n                              message: response.status,\n                              type: 'warning',\n                              dismissible: true,\n                              pauseOnHover: true,\n                              duration: 2000,\n                              position: 'bottom-right',\n                              \n                          })\n\n                          }\n                      })\n                      .catch(error => {\n                          if (error.response) {\n                              // for (const property in error.response.data) {\n                                // this.errors.push(`${property}: ${error.response.data[property]}`)\n                                this.errors.push(error.response.data)\n                              // }\n\n                              console.log(JSON.stringify(error.response))\n                          } else if (error.message) {\n                              this.errors.push('Something went wrong. Please try again')\n                              console.log(JSON.stringify(error.response))\n                          }\n                      })\n\n          },\n    }\n  }\n  </script>\n"],"sourceRoot":""}]}