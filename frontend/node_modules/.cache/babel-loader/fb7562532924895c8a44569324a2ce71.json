{"remainingRequest":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/babel-loader/lib/index.js!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/views/Shop.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/views/Shop.vue","mtime":1681994246338},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/babel-loader/lib/index.js","mtime":1681917295923},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1681917297993}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgdG9hc3QgfSBmcm9tICJidWxtYS10b2FzdCI7CmltcG9ydCBQcm9kdWN0Qm94IGZyb20gIkAvY29tcG9uZW50cy9Qcm9kdWN0Qm94LnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2hvcCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3A6IHt9LAogICAgICBhY2NvdW50OiB7fSwKICAgICAgcHJvZHVjdHM6IFtdLAogICAgICBwcm9kdWN0X3RvdGFsX3BhZ2VzOiAwLAogICAgICBwcm9kdWN0X3BhZ2VfbnVtOiAxLAogICAgICB0eXBlOiAiMiIsCiAgICAgIGlkOiAiIgogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFByb2R1Y3RCb3g6IFByb2R1Y3RCb3gKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBkb2N1bWVudC50aXRsZSA9ICLllYblupfor6bmg4XpobUiOwogICAgdGhpcy5pZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgIHRoaXMuZ2V0UHJvZHVjdHMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFByb2R1Y3RzOiBmdW5jdGlvbiBnZXRQcm9kdWN0cygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBmb3JtRGF0YSA9IHsKICAgICAgICBhdXRob3JpemU6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhvcml6ZSIpIHx8ICJ7fSIpLAogICAgICAgIHByb2R1Y3RfcGFnZV9udW06IHRoaXMucHJvZHVjdF9wYWdlX251bQogICAgICB9OwogICAgICB2YXIgdXJsID0gIi9hcGkvc2hvcC8iICsgdGhpcy5pZDsKICAgICAgYXhpb3MucG9zdCh1cmwsIGZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICBfdGhpcy5zaG9wID0gcmVzcG9uc2UuZGF0YS5zaG9wOwogICAgICAgIF90aGlzLmFjY291bnQgPSByZXNwb25zZS5kYXRhLmFjY291bnQ7CiAgICAgICAgX3RoaXMucHJvZHVjdHMgPSByZXNwb25zZS5kYXRhLnByb2R1Y3RzOwogICAgICAgIF90aGlzLnByb2R1Y3RfdG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLnByb2R1Y3RfdG90YWxfcGFnZXM7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgLy/lhYXlgLwKICAgIHJlZnVuZDogZnVuY3Rpb24gcmVmdW5kKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBmb3JtRGF0YSA9IHsKICAgICAgICBhdXRob3JpemU6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhvcml6ZSIpIHx8ICJ7fSIpLAogICAgICAgIGFjY291bnRfaWQ6IHRoaXMuYWNjb3VudC5pZCwKICAgICAgICBhbW91bnQ6IHRoaXMuYWRkZWQKICAgICAgfTsKICAgICAgYXhpb3MucG9zdCgiL2FwaS9hY2NvdW50L2NoYXJnZSIsIGZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKGZvcm1EYXRhKTsKCiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIHRvYXN0KHsKICAgICAgICAgICAgbWVzc2FnZTogIuWFheWAvOaIkOWKn++8gSIsCiAgICAgICAgICAgIHR5cGU6ICJpcy1zdWNjZXNzIiwKICAgICAgICAgICAgZGlzbWlzc2libGU6IHRydWUsCiAgICAgICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSwKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAsCiAgICAgICAgICAgIHBvc2l0aW9uOiAiYm90dG9tLXJpZ2h0IgogICAgICAgICAgfSk7IC8v5oiQ5Yqf5ZCO6YeN572u6aG16Z2iCgogICAgICAgICAgX3RoaXMyLmdldEluZm8oKTsKCiAgICAgICAgICBfdGhpczIuYWRkZWQgPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0b2FzdCh7CiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSwKICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICBkaXNtaXNzaWJsZTogdHJ1ZSwKICAgICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgICAgICAgcG9zaXRpb246ICJib3R0b20tcmlnaHQiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/views/Shop.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"colums\">\n    <div class=\"column is-4 is-offset-4\">\n      <h1 class=\"title\">商店名称：{{ shop.name }}</h1>\n    </div>\n  </div>\n  <form @submit.prevent=\"getProducts\">\n    <div class=\"column is-2\">\n      <div class=\"field\">\n        <label>页码/共{{ product_total_pages }}页</label>\n        <div class=\"control\">\n          <input type=\"text\" class=\"input\" v-model=\"product_page_num\" />\n        </div>\n      </div>\n      <div class=\"field\">\n        <div class=\"control\">\n          <button class=\"button is-dark\">搜索</button>\n        </div>\n      </div>\n    </div>\n  </form>\n  <div class=\"columns is-multiline\">\n    <ProductBox v-for=\"product in products\" :key=\"product.id\" :product=\"product\" :type=\"type\"></ProductBox>\n  </div>\n</template>\n\n<script>\n  import axios from \"axios\";\n  import { toast } from \"bulma-toast\";\n  import ProductBox from \"@/components/ProductBox.vue\";\n  export default {\n    name: \"Shop\",\n    data() {\n      return {\n        shop: {},\n        account: {},\n        products: [],\n        product_total_pages: 0,\n        product_page_num: 1,\n        type: \"2\",\n        id: \"\",\n      };\n    },\n    components: {\n      ProductBox,\n    },\n    mounted() {\n      document.title = \"商店详情页\";\n      this.id = this.$route.params.id;\n      this.getProducts();\n    },\n    methods: {\n      getProducts() {\n        var formData = {\n          authorize: JSON.parse(localStorage.getItem(\"authorize\") || \"{}\"),\n          product_page_num: this.product_page_num,\n        };\n        var url = \"/api/shop/\" + this.id;\n        axios\n          .post(url, formData)\n          .then((response) => {\n            console.log(response);\n            this.shop = response.data.shop;\n            this.account = response.data.account;\n            this.products = response.data.products;\n            this.product_total_pages = response.data.product_total_pages;\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      },\n\n      //充值\n      refund() {\n        var formData = {\n          authorize: JSON.parse(localStorage.getItem(\"authorize\") || \"{}\"),\n          account_id: this.account.id,\n          amount: this.added,\n        };\n        axios\n          .post(\"/api/account/charge\", formData)\n          .then((response) => {\n            console.log(formData);\n            if (response.status == 200) {\n              toast({\n                message: \"充值成功！\",\n                type: \"is-success\",\n                dismissible: true,\n                pauseOnHover: true,\n                duration: 2000,\n                position: \"bottom-right\",\n              });\n              //成功后重置页面\n              this.getInfo();\n              this.added = 0;\n            } else {\n              toast({\n                message: response.data.message,\n                type: \"warning\",\n                dismissible: true,\n                pauseOnHover: true,\n                duration: 2000,\n                position: \"bottom-right\",\n              });\n            }\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      },\n    },\n  };\n</script>\n"],"sourceRoot":""}]}