{"remainingRequest":"/Users/kerunyu/Desktop/SWE/lab2/frontend/node_modules/babel-loader/lib/index.js!/Users/kerunyu/Desktop/SWE/lab2/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/kerunyu/Desktop/SWE/lab2/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/kerunyu/Desktop/SWE/lab2/frontend/src/views/Warehouse.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/kerunyu/Desktop/SWE/lab2/frontend/src/views/Warehouse.vue","mtime":1679208413412},{"path":"/Users/kerunyu/Desktop/SWE/lab2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1671711210000},{"path":"/Users/kerunyu/Desktop/SWE/lab2/frontend/node_modules/babel-loader/lib/index.js","mtime":1671711214000},{"path":"/Users/kerunyu/Desktop/SWE/lab2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1671711210000},{"path":"/Users/kerunyu/Desktop/SWE/lab2/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1671711212000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdidWxtYS10b2FzdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnV2FyZWhvdXNlJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvcG5hbWU6ICcnLAogICAgICB0eXBlOiAnJywKICAgICAgaWRfY2FyZDogJycsCiAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgYWRkcmVzczogJycsCiAgICAgIGNhcGl0YWw6ICcnLAogICAgICBkYXRlOiAnJywKICAgICAgZXJyb3JzOiBbXQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBkb2N1bWVudC50aXRsZSA9ICfnlLPor7flvIDlupfvvIEnOwogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuZXJyb3JzID0gW107IC8vIGlmICh0aGlzLnNob3BuYW1lLmxlbmd0aCA+IDEyKSB7CiAgICAgIC8vICAgICB0aGlzLmVycm9ycy5wdXNoKCflupflkI3opoHlnKgxMuS4quWtl+espuS7peWGhScpCiAgICAgIC8vIH0KICAgICAgLy8gaWYgKHRoaXMudHlwZT09JycpIHsKICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCkKICAgICAgLy8gICAgIHRoaXMuZXJyb3JzLnB1c2goJ+ivt+aPkOS+m+ato+ehrueahOWVhuWTgeexu+WIqycpCiAgICAgIC8vIH0KICAgICAgLy8gaWYgKC9eXGR7MTh9JC8udGVzdCh0aGlzLmlkX2NhcmQpKSB7CiAgICAgIC8vICAgICBjb25zb2xlLmxvZygpCiAgICAgIC8vICAgICB0aGlzLmVycm9ycy5wdXNoKCfor7fovpPlhaXmraPnoa7nmoTkuK3lm73ouqvku73or4Hlj7fvvIzkuIDlhbExOOS9jScpCiAgICAgIC8vIH0KICAgICAgLy8gaWYgKHRoaXMuZGVzY3JpcHRpb24ubGVuZ3RoID4gMTI4KSB7CiAgICAgIC8vICAgICBjb25zb2xlLmxvZygpCiAgICAgIC8vICAgICB0aGlzLmVycm9ycy5wdXNoKCfnroDku4vopoHlnKgxMuS4quWtl+espuS7peWGhScpCiAgICAgIC8vIH0KICAgICAgLy8gaWYgKHRoaXMuZGVzY3JpcHRpb24uYWRkcmVzcyA+IDMyKSB7CiAgICAgIC8vICAgICBjb25zb2xlLmxvZygpCiAgICAgIC8vICAgICB0aGlzLmVycm9ycy5wdXNoKCflpIfmoYjlnLDlnYDopoHlnKgzMuS4quWtl+espuS7peWGhScpCiAgICAgIC8vIH0KICAgICAgLy8gaWYgKC9eKFsxLTldXGR7Myx9fFsxLTldXGR7MCwyfSgsXGR7M30pKykoXC5cZCspPyQvLnRlc3QodGhpcy5jYXBpdGFsKSkgewogICAgICAvLyAgICAgY29uc29sZS5sb2coKQogICAgICAvLyAgICAgdGhpcy5lcnJvcnMucHVzaCgn5rOo5YaM6LWE6YeR6Iez5bCR6ZyA6KaBMTAwMOWFgycpCiAgICAgIC8vIH0KICAgICAgLy8gaWYgKC9eXGR7NH0tXGR7Mn0tXGR7Mn0kLy50ZXN0KHRoaXMuZGF0ZSkpIHsKICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCkKICAgICAgLy8gICAgIHRoaXMuZXJyb3JzLnB1c2goJ+aXpeacn+S4jeWQiOinhO+8jOivt+aMieeFp1lZWVktTU0tRETovpPlhaUnKQogICAgICAvLyB9CgogICAgICBpZiAoIXRoaXMuZXJyb3JzLmxlbmd0aCkgewogICAgICAgIHZhciBmb3JtRGF0YSA9IHsKICAgICAgICAgIGF1dGhvcml6ZTogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aG9yaXplJykgfHwgJ3t9JyksCiAgICAgICAgICBzaG9wbmFtZTogdGhpcy5zaG9wbmFtZSwKICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSwKICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLAogICAgICAgICAgY2FwaXRhbDogdGhpcy5jYXBpdGFsLAogICAgICAgICAgaWRfY2FyZDogdGhpcy5pZF9jYXJkLAogICAgICAgICAgYWRkcmVzczogdGhpcy5hZGRyZXNzLAogICAgICAgICAgZGF0ZTogdGhpcy5kYXRlCiAgICAgICAgfTsKICAgICAgICBheGlvcy5wb3N0KCcvc2hvcC9hcHBsaWNhdGlvbicsIGZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEpOwoKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgIHRvYXN0KHsKICAgICAgICAgICAgICBtZXNzYWdlOiAn5byA5bqX5oiQ5Yqf77yBJywKICAgICAgICAgICAgICB0eXBlOiAnaXMtc3VjY2VzcycsCiAgICAgICAgICAgICAgZGlzbWlzc2libGU6IHRydWUsCiAgICAgICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwLAogICAgICAgICAgICAgIHBvc2l0aW9uOiAnYm90dG9tLXJpZ2h0JwogICAgICAgICAgICB9KTsgLy8gdGhpcy4kcm91dGVyLnB1c2goJy9sb2ctaW4nKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdG9hc3QoewogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSwKICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgICAgICAgZGlzbWlzc2libGU6IHRydWUsCiAgICAgICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwLAogICAgICAgICAgICAgIHBvc2l0aW9uOiAnYm90dG9tLXJpZ2h0JwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRob3JpemUnKSB8fCAne30nKSkKICAgICAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gZXJyb3IucmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgIF90aGlzLmVycm9ycy5wdXNoKCIiLmNvbmNhdChwcm9wZXJ0eSwgIjogIikuY29uY2F0KGVycm9yLnJlc3BvbnNlLmRhdGFbcHJvcGVydHldKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZvcm1EYXRhKTsKICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgICBfdGhpcy5lcnJvcnMucHVzaChlcnJvci5tZXNzYWdlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/kerunyu/Desktop/SWE/lab2/frontend/src/views/Warehouse.vue"],"names":[],"mappings":";;;AA6EA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,KAAT,QAAsB,aAAtB;AACA,eAAe;AACX,EAAA,IAAI,EAAE,WADK;AAEX,EAAA,IAFW,kBAEJ;AACH,WAAO;AACH,MAAA,QAAQ,EAAE,EADP;AAEH,MAAA,IAAI,EAAE,EAFH;AAGH,MAAA,OAAO,EAAE,EAHN;AAIH,MAAA,WAAW,EAAE,EAJV;AAKH,MAAA,OAAO,EAAE,EALN;AAMH,MAAA,OAAO,EAAE,EANN;AAOH,MAAA,IAAI,EAAE,EAPH;AAQH,MAAA,MAAM,EAAE;AARL,KAAP;AAUH,GAbU;AAcX,EAAA,OAdW,qBAcD;AACN,IAAA,QAAQ,CAAC,KAAT,GAAiB,OAAjB;AAEH,GAjBU;AAkBX,EAAA,OAAO,EAAE;AACL,IAAA,UADK,wBACQ;AAAA;;AACT,WAAK,MAAL,GAAc,EAAd,CADS,CAET;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAEA,UAAI,CAAC,KAAK,MAAL,CAAY,MAAjB,EAAyB;AACjB,YAAI,QAAO,GAAK;AAEhB,UAAA,SAAS,EAAE,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,WAArB,KAAqC,IAAhD,CAFK;AAKhB,UAAA,QAAQ,EAAE,KAAK,QALC;AAMhB,UAAA,IAAI,EAAE,KAAK,IANK;AAOhB,UAAA,WAAW,EAAE,KAAK,WAPF;AAQhB,UAAA,OAAO,EAAE,KAAK,OARE;AAShB,UAAA,OAAO,EAAE,KAAK,OATE;AAUhB,UAAA,OAAO,EAAE,KAAK,OAVE;AAWhB,UAAA,IAAI,EAAE,KAAK;AAXK,SAAhB;AAeJ,QAAA,KAAI,CACC,IADL,CACU,mBADV,EAC+B,QAD/B,EAEK,IAFL,CAEU,UAAA,QAAO,EAAK;AACd,UAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;;AACA,cAAI,QAAQ,CAAC,MAAT,IAAmB,GAAvB,EAA2B;AACvB,YAAA,KAAK,CAAC;AACN,cAAA,OAAO,EAAE,OADH;AAEN,cAAA,IAAI,EAAE,YAFA;AAGN,cAAA,WAAW,EAAE,IAHP;AAIN,cAAA,YAAY,EAAE,IAJR;AAKN,cAAA,QAAQ,EAAE,IALJ;AAMN,cAAA,QAAQ,EAAE;AANJ,aAAD,CAAL,CADuB,CAU3B;AACA,WAXA,MAWM;AACF,YAAA,KAAK,CAAC;AACN,cAAA,OAAO,EAAE,QAAQ,CAAC,IAAT,CAAc,OADjB;AAEN,cAAA,IAAI,EAAE,SAFA;AAGN,cAAA,WAAW,EAAE,IAHP;AAIN,cAAA,YAAY,EAAE,IAJR;AAKN,cAAA,QAAQ,EAAE,IALJ;AAMN,cAAA,QAAQ,EAAE;AANJ,aAAD,CAAL;AAUJ;AACH,SA3BL,WA4BW,UAAA,KAAI,EAAK;AACZ,cAAI,KAAK,CAAC,QAAV,EAAoB;AAChB;AACA,iBAAK,IAAM,QAAX,IAAuB,KAAK,CAAC,QAAN,CAAe,IAAtC,EAA4C;AACxC,cAAA,KAAI,CAAC,MAAL,CAAY,IAAZ,WAAoB,QAApB,eAAiC,KAAK,CAAC,QAAN,CAAe,IAAf,CAAoB,QAApB,CAAjC;AACJ;;AAEA,YAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;AACJ,WAPA,MAOO,IAAI,KAAK,CAAC,OAAV,EAAmB;AAEtB,YAAA,KAAI,CAAC,MAAL,CAAY,IAAZ,CAAiB,KAAK,CAAC,OAAvB;AAEJ;AACH,SAzCL;AA0CJ;AACJ;AA/FK;AAlBE,CAAf","sourcesContent":["<template>\n    <div type=\"page-warehouse\">\n        <div type=\"columns\">\n            <div type=\"column is-4 is-offset-4\">\n                <h1 type=\"title\">开店</h1>\n\n                <form @submit.prevent=\"submitForm\">\n\n                    <div type=\"field\">\n                        <label>店名</label>\n                        <div type=\"control\">\n                            <input type=\"input\" v-model=\"shopname\">\n                        </div>\n                    </div>\n\n                    <div type=\"field\">\n                        <label>售卖商品类别</label>\n                        <div type=\"control\">\n                            <input type=\"input\" v-model=\"type\">\n                        </div>\n                    </div>\n\n                    <div type=\"field\">\n                        <label>身份证号</label>\n                        <div type=\"control\">\n                            <input type=\"input\" v-model=\"id_card\">\n                        </div>\n                    </div>\n\n                    <div type=\"field\">\n                        <label>商店简介</label>\n                        <div type=\"control\">\n                            <input type=\"input\" v-model=\"description\">\n                        </div>\n                    </div>\n\n                    <div type=\"field\">\n                        <label>备案地址</label>\n                        <div type=\"control\">\n                            <input type=\"input\" v-model=\"address\">\n                        </div>\n                    </div>\n\n                    <div type=\"field\">\n                        <label>注册资金</label>\n                        <div type=\"control\">\n                            <input type=\"input\" v-model=\"capital\">\n                        </div>\n                    </div>\n\n                    <div type=\"field\">\n                        <label>注册时间</label>\n                        <div type=\"control\">\n                            <input type=\"input\" v-model=\"date\">\n                        </div>\n                    </div>\n\n                    <div type=\"notification is-danger\" v-if=\"errors.length\">\n                        <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                    </div>\n\n                    <div type=\"field\">\n                        <div type=\"control\">\n                            <button type=\"button is-dark\">开店！</button>\n                        </div>\n                    </div>\n\n                    <hr>\n\n\n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { toast } from 'bulma-toast'\nexport default {\n    name: 'Warehouse',\n    data() {\n        return {\n            shopname: '',\n            type: '',\n            id_card: '',\n            description: '',\n            address: '',\n            capital: '',\n            date: '',\n            errors: []\n        }\n    },\n    mounted() {\n        document.title = '申请开店！';\n\n    },\n    methods: {\n        submitForm() {\n            this.errors = []\n            // if (this.shopname.length > 12) {\n            //     this.errors.push('店名要在12个字符以内')\n            // }\n\n            // if (this.type=='') {\n            //     console.log()\n            //     this.errors.push('请提供正确的商品类别')\n            // }\n\n            // if (/^\\d{18}$/.test(this.id_card)) {\n            //     console.log()\n            //     this.errors.push('请输入正确的中国身份证号，一共18位')\n            // }\n\n            // if (this.description.length > 128) {\n            //     console.log()\n            //     this.errors.push('简介要在12个字符以内')\n            // }\n            // if (this.description.address > 32) {\n            //     console.log()\n            //     this.errors.push('备案地址要在32个字符以内')\n            // }\n   \n            // if (/^([1-9]\\d{3,}|[1-9]\\d{0,2}(,\\d{3})+)(\\.\\d+)?$/.test(this.capital)) {\n            //     console.log()\n            //     this.errors.push('注册资金至少需要1000元')\n            // }\n\n            // if (/^\\d{4}-\\d{2}-\\d{2}$/.test(this.date)) {\n            //     console.log()\n            //     this.errors.push('日期不合规，请按照YYYY-MM-DD输入')\n            // }\n\n            if (!this.errors.length) {\n                    var formData =  {\n\n                    authorize: JSON.parse(localStorage.getItem('authorize') || '{}'),\n\n\n                    shopname: this.shopname,\n                    type: this.type,\n                    description: this.description,\n                    capital: this.capital,\n                    id_card: this.id_card,\n                    address: this.address,\n                    date: this.date,\n                }\n\n\n                axios\n                    .post('/shop/application', formData)\n                    .then(response => {\n                        console.log(formData)\n                        if (response.status == 200){\n                            toast({\n                            message: '开店成功！',\n                            type: 'is-success',\n                            dismissible: true,\n                            pauseOnHover: true,\n                            duration: 2000,\n                            position: 'bottom-right',\n                            \n                        })\n                        // this.$router.push('/log-in')\n                        } else{\n                            toast({\n                            message: response.data.message,\n                            type: 'warning',\n                            dismissible: true,\n                            pauseOnHover: true,\n                            duration: 2000,\n                            position: 'bottom-right',\n                            \n                        })\n\n                        }\n                    })\n                    .catch(error => {\n                        if (error.response) {\n                            // console.log(JSON.parse(localStorage.getItem('authorize') || '{}'))\n                            for (const property in error.response.data) {\n                                this.errors.push(`${property}: ${error.response.data[property]}`)\n                            }\n\n                            console.log(formData)\n                        } else if (error.message) {\n                            \n                            this.errors.push(error.message)\n                            \n                        }\n                    })\n            }\n        }\n    }\n}\n</script>"],"sourceRoot":""}]}