{"remainingRequest":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/babel-loader/lib/index.js!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/components/ShopBox.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/components/ShopBox.vue","mtime":1682250747553},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/babel-loader/lib/index.js","mtime":1681917295923},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1681917297993}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsgLy8gaW1wb3J0IHsgbnVtYmVyTGl0ZXJhbFR5cGVBbm5vdGF0aW9uIH0gZnJvbSAiQGJhYmVsL3R5cGVzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2hvcEJveCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIG1vdmllOiB0aGlzLiRzdG9yZS5zdGF0ZS5zaG9wLAogICAgICBlcnJvcnM6IFtdLAogICAgICBhcHByb3ZlZDogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBwdXNoX3Nob3A6IGZ1bmN0aW9uIHB1c2hfc2hvcCgpIHsKICAgICAgdmFyIHVybCA9ICIvc2hvcC8iICsgdGhpcy5zaG9wLmlkOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogdXJsCiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnNob3ApOwogICAgfSwKICAgIHB1c2hfd2FyZWhvdXNlOiBmdW5jdGlvbiBwdXNoX3dhcmVob3VzZSgpIHsKICAgICAgdmFyIHVybCA9ICIvd2FyZWhvdXNlLyIgKyB0aGlzLnNob3AuaWQ7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiB1cmwKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2hvcCk7CiAgICB9LAogICAgcmVsZWFzZTogZnVuY3Rpb24gcmVsZWFzZShhcHByb3ZlZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5lcnJvcnMgPSBbXTsKICAgICAgdmFyIGZvcm1EYXRhID0gewogICAgICAgIGF1dGhvcml6ZTogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXV0aG9yaXplIikgfHwgInt9IiksCiAgICAgICAgc2hvcF9pZDogdGhpcy5zaG9wLmlkLAogICAgICAgIGFwcHJvdmVkOiBhcHByb3ZlZAogICAgICB9OwogICAgICBjb25zb2xlLmxvZyh0aGlzLnJldmlldyk7CiAgICAgIHZhciB1cmw7CiAgICAgIGlmICh0aGlzLnJldmlldyA9PT0gIm9wZW4iKSB1cmwgPSAiL2FwaS9zaG9wL2FwcHJvdmFsIjtlbHNlIGlmICh0aGlzLnJldmlldyA9PT0gImRlbGV0ZSIpIHVybCA9ICJhcGkvc2hvcC9kZWxldGUvYXBwcm92YWwiOwogICAgICBheGlvcy5wb3N0KHVybCwgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwoKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgdG9hc3QoewogICAgICAgICAgICBtZXNzYWdlOiAi5ZWG5bqX5a6h5qC46YCa6L+H77yBIiwKICAgICAgICAgICAgdHlwZTogImlzLXN1Y2Nlc3MiLAogICAgICAgICAgICBkaXNtaXNzaWJsZTogdHJ1ZSwKICAgICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgICAgICAgcG9zaXRpb246ICJjZW50ZXIiCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdG9hc3QoewogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5zdGF0dXMsCiAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgZGlzbWlzc2libGU6IHRydWUsCiAgICAgICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSwKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAsCiAgICAgICAgICAgIHBvc2l0aW9uOiAiY2VudGVyIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7CgogICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgX3RoaXMuZXJyb3JzLnB1c2goZXJyb3IucmVzcG9uc2UuZGF0YSk7CgogICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZXJyb3IucmVzcG9uc2UpKTsKICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UpIHsKICAgICAgICAgIF90aGlzLmVycm9ycy5wdXNoKCJTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2FpbiIpOwoKICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGVycm9yLnJlc3BvbnNlKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy50eXBlID09PSAiMSIpIHsKICAgICAgdGhpcy5pc19zZWxsZXIgPSB0cnVlOwogICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICIyIikgewogICAgICB0aGlzLmlzX3VzZXIgPSB0cnVlOwogICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICIwIikgewogICAgICB0aGlzLmlzX2FkbWluID0gdHJ1ZTsKICAgIH0KICB9LAogIHByb3BzOiB7CiAgICBzaG9wOiB7CiAgICAgIHR5cGU6IE9iamVjdAogICAgfSwKICAgIHR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgcmV2aWV3OiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/components/ShopBox.vue"],"names":[],"mappings":"AA4BE,OAAO,KAAP,MAAkB,OAAlB,C,CACA;;AACA,eAAe;AACb,EAAA,IAAI,EAAE,SADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL;AACA,MAAA,MAAM,EAAE,EAFH;AAGL,MAAA,QAAQ,EAAE;AAHL,KAAP;AAKD,GARY;AASb,EAAA,OAAO,EAAE;AACP,IAAA,SADO,uBACK;AACV,UAAI,GAAE,GAAI,WAAW,KAAK,IAAL,CAAU,EAA/B;AACA,WAAK,OAAL,CAAa,IAAb,CAAkB;AAAE,QAAA,IAAI,EAAE;AAAR,OAAlB;AACA,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,IAAjB;AACD,KALM;AAMP,IAAA,cANO,4BAMU;AACf,UAAI,GAAE,GAAI,gBAAgB,KAAK,IAAL,CAAU,EAApC;AACA,WAAK,OAAL,CAAa,IAAb,CAAkB;AAAE,QAAA,IAAI,EAAE;AAAR,OAAlB;AACA,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,IAAjB;AACD,KAVM;AAWP,IAAA,OAXO,mBAWC,QAXD,EAWW;AAAA;;AAChB,WAAK,MAAL,GAAc,EAAd;AACA,UAAI,QAAO,GAAI;AACb,QAAA,SAAS,EAAE,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,WAArB,KAAqC,IAAhD,CADE;AAEb,QAAA,OAAO,EAAE,KAAK,IAAL,CAAU,EAFN;AAGb,QAAA,QAAQ,EAAE;AAHG,OAAf;AAKA,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,MAAjB;AACA,UAAI,GAAJ;AACA,UAAI,KAAK,MAAL,KAAgB,MAApB,EAA4B,GAAE,GAAI,oBAAN,CAA5B,KACK,IAAI,KAAK,MAAL,KAAgB,QAApB,EAA8B,GAAE,GAAI,0BAAN;AACnC,MAAA,KAAI,CACD,IADH,CACQ,GADR,EACa,QADb,EAEG,IAFH,CAEQ,UAAC,QAAD,EAAc;AAClB,QAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;;AACA,YAAI,QAAQ,CAAC,MAAT,IAAmB,GAAvB,EAA4B;AAC1B,UAAA,KAAK,CAAC;AACJ,YAAA,OAAO,EAAE,SADL;AAEJ,YAAA,IAAI,EAAE,YAFF;AAGJ,YAAA,WAAW,EAAE,IAHT;AAIJ,YAAA,YAAY,EAAE,IAJV;AAKJ,YAAA,QAAQ,EAAE,IALN;AAMJ,YAAA,QAAQ,EAAE;AANN,WAAD,CAAL;AAQF,SATA,MASO;AACL,UAAA,KAAK,CAAC;AACJ,YAAA,OAAO,EAAE,QAAQ,CAAC,MADd;AAEJ,YAAA,IAAI,EAAE,SAFF;AAGJ,YAAA,WAAW,EAAE,IAHT;AAIJ,YAAA,YAAY,EAAE,IAJV;AAKJ,YAAA,QAAQ,EAAE,IALN;AAMJ,YAAA,QAAQ,EAAE;AANN,WAAD,CAAL;AAQF;AACD,OAvBH,WAwBS,UAAC,KAAD,EAAW;AAChB,QAAA,OAAO,CAAC,GAAR,CAAY,KAAK,CAAC,QAAlB;;AACA,YAAI,KAAK,CAAC,QAAV,EAAoB;AAClB,UAAA,KAAI,CAAC,MAAL,CAAY,IAAZ,CAAiB,KAAK,CAAC,QAAN,CAAe,IAAhC;;AACA,UAAA,OAAO,CAAC,GAAR,CAAY,IAAI,CAAC,SAAL,CAAe,KAAK,CAAC,QAArB,CAAZ;AACF,SAHA,MAGO,IAAI,KAAK,CAAC,OAAV,EAAmB;AACxB,UAAA,KAAI,CAAC,MAAL,CAAY,IAAZ,CAAiB,wCAAjB;;AACA,UAAA,OAAO,CAAC,GAAR,CAAY,IAAI,CAAC,SAAL,CAAe,KAAK,CAAC,QAArB,CAAZ;AACF;AACD,OAjCH;AAkCD;AAxDM,GATI;AAmEb,EAAA,OAnEa,qBAmEH;AACR,QAAI,KAAK,IAAL,KAAc,GAAlB,EAAuB;AACrB,WAAK,SAAL,GAAiB,IAAjB;AACF,KAFA,MAEO,IAAI,KAAK,IAAL,KAAc,GAAlB,EAAuB;AAC5B,WAAK,OAAL,GAAe,IAAf;AACF,KAFO,MAEA,IAAI,KAAK,IAAL,KAAc,GAAlB,EAAuB;AAC5B,WAAK,QAAL,GAAgB,IAAhB;AACF;AACD,GA3EY;AA4Eb,EAAA,KAAK,EAAE;AACL,IAAA,IAAI,EAAE;AAAE,MAAA,IAAI,EAAE;AAAR,KADD;AAEL,IAAA,IAAI,EAAE;AAAE,MAAA,IAAI,EAAE;AAAR,KAFD;AAGL,IAAA,MAAM,EAAE;AAAE,MAAA,IAAI,EAAE;AAAR;AAHH;AA5EM,CAAf","sourcesContent":["<template>\n  <div class=\"column is-3\">\n    <div class=\"box\">\n      <h3 v-if=\"is_admin\" class=\"is-size-4\">ID: {{ shop.id }}</h3>\n      <h3 class=\"is-size-4\">名称：{{ shop.name }}</h3>\n      <p class=\"is-size-6 has-text-grey\">类型：{{ shop.type }}</p>\n      <p v-if=\"is_user || is_admin\" class=\"is-size-6 has-text-grey\">描述：{{ shop.description }}</p>\n      <p v-if=\"is_admin\" class=\"is-size-6 has-text-grey\">地址：{{ shop.address }}</p>\n      <!-- 若从/my-shops点击则跳转到商店管理界面/warehouse -->\n      <button v-if=\"is_seller && shop.approved\" @click=\"push_warehouse\" class=\"button is-dark mt-4\">\n        前往\n      </button>\n      <button v-if=\"is_seller && !shop.approved\" @click=\"push_warehouse\" class=\"button is-dark mt-4\" disabled>\n        前往\n      </button>\n      <!-- 若从/home点击则跳转到商店展示界面/shop -->\n      <button v-if=\"is_user\" @click=\"push_shop\" class=\"button is-dark mt-4\">前往</button>\n      <button v-if=\"is_admin\" @click=\"release(true)\" class=\"button mt-4\">\n        通过申请\n      </button>\n      <button v-if=\"is_admin\" @click=\"release(false)\" class=\"button mt-4\">\n        拒绝申请\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\n  import axios from \"axios\";\n  // import { numberLiteralTypeAnnotation } from \"@babel/types\";\n  export default {\n    name: \"ShopBox\",\n    data() {\n      return {\n        // movie: this.$store.state.shop,\n        errors: [],\n        approved: false,\n      };\n    },\n    methods: {\n      push_shop() {\n        var url = \"/shop/\" + this.shop.id;\n        this.$router.push({ path: url });\n        console.log(this.shop);\n      },\n      push_warehouse() {\n        var url = \"/warehouse/\" + this.shop.id;\n        this.$router.push({ path: url });\n        console.log(this.shop);\n      },\n      release(approved) {\n        this.errors = [];\n        var formData = {\n          authorize: JSON.parse(localStorage.getItem(\"authorize\") || \"{}\"),\n          shop_id: this.shop.id,\n          approved: approved,\n        };\n        console.log(this.review);\n        var url;\n        if (this.review === \"open\") url = \"/api/shop/approval\";\n        else if (this.review === \"delete\") url = \"api/shop/delete/approval\";\n        axios\n          .post(url, formData)\n          .then((response) => {\n            console.log(response);\n            if (response.status == 200) {\n              toast({\n                message: \"商店审核通过！\",\n                type: \"is-success\",\n                dismissible: true,\n                pauseOnHover: true,\n                duration: 2000,\n                position: \"center\",\n              });\n            } else {\n              toast({\n                message: response.status,\n                type: \"warning\",\n                dismissible: true,\n                pauseOnHover: true,\n                duration: 2000,\n                position: \"center\",\n              });\n            }\n          })\n          .catch((error) => {\n            console.log(error.response);\n            if (error.response) {\n              this.errors.push(error.response.data);\n              console.log(JSON.stringify(error.response));\n            } else if (error.message) {\n              this.errors.push(\"Something went wrong. Please try again\");\n              console.log(JSON.stringify(error.response));\n            }\n          });\n      },\n    },\n    created() {\n      if (this.type === \"1\") {\n        this.is_seller = true;\n      } else if (this.type === \"2\") {\n        this.is_user = true;\n      } else if (this.type === \"0\") {\n        this.is_admin = true;\n      }\n    },\n    props: {\n      shop: { type: Object },\n      type: { type: String },\n      review: { type: String },\n    },\n  };\n</script>\n\n<style scoped>\n  .image {\n    margin-top: -1.25rem;\n    margin-left: -1.25rem;\n    margin-right: -1.25rem;\n  }\n</style>\n"],"sourceRoot":""}]}