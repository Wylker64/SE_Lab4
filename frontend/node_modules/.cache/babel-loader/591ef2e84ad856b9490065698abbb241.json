{"remainingRequest":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/babel-loader/lib/index.js!/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/src/views/PersonalInfo.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/src/views/PersonalInfo.vue","mtime":1682239564744},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/babel-loader/lib/index.js","mtime":1681917295923},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1681917297993}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgdG9hc3QgfSBmcm9tICJidWxtYS10b2FzdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUGVyc29uYWxJbmZvIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hhbmdlZDogZmFsc2UsCiAgICAgIGlkX2NhcmQ6ICIiLAogICAgICB1c2VybmFtZTogIiIsCiAgICAgIHBob25lX251bWJlcjogIiIsCiAgICAgIGVtYWlsOiAiIiwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICBuZXdfcGFzc3dvcmQ6ICIiLAogICAgICBuZXdfcGFzc3dvcmQyOiAiIiwKICAgICAgZXJyb3JzOiBbXQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBkb2N1bWVudC50aXRsZSA9ICLkuKrkurrotYTmlpkiOyAvL+WcqOi/m+WFpemhtemdouaXtuiOt+WPluS4quS6uui1hOaWmQoKICAgIHRoaXMuZ2V0SW5mbygpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBmb3JtRGF0YSA9IHsKICAgICAgICBhdXRob3JpemU6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhvcml6ZSIpIHx8ICJ7fSIpCiAgICAgIH07CiAgICAgIGF4aW9zLnBvc3QoIi9hcGkvaW5mbyIsIGZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICBfdGhpcy5pZF9jYXJkID0gcmVzcG9uc2UuZGF0YS5pZENhcmQ7CiAgICAgICAgX3RoaXMudXNlcm5hbWUgPSByZXNwb25zZS5kYXRhLnVzZXJuYW1lOwogICAgICAgIF90aGlzLnBob25lX251bWJlciA9IHJlc3BvbnNlLmRhdGEucGhvbmU7CiAgICAgICAgX3RoaXMuZW1haWwgPSByZXNwb25zZS5kYXRhLmVtYWlsOwogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VQcm9maWxlOiBmdW5jdGlvbiBjaGFuZ2VQcm9maWxlKCkgewogICAgICB0aGlzLmNoYW5nZWQgPSB0cnVlOwogICAgfSwKICAgIGNhbmNlbENoYW5nZTogZnVuY3Rpb24gY2FuY2VsQ2hhbmdlKCkgewogICAgICB0aGlzLmNoYW5nZWQgPSBmYWxzZTsKICAgIH0sCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8v5YmN56uv5ZCI6KeE5oCn5Yik5patCiAgICAgIHRoaXMuZXJyb3JzID0gW107CgogICAgICBpZiAodGhpcy51c2VybmFtZS5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCLnlKjmiLflkI3kuI3lvpfkuLrnqboiKTsKICAgICAgfSBlbHNlIGlmICghL15cdyskLy50ZXN0KHRoaXMudXNlcm5hbWUpIHx8IHRoaXMudXNlcm5hbWUubGVuZ3RoID4gMTAgfHwgdGhpcy51c2VybmFtZS5sZW5ndGggPCAzKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgi55So5oi35ZCN5qC85byP5LiN5q2j56GuKOiLseaWh+OAgeaVsOWtl+OAgeS4i+WIkue6v++8jOmVv+W6puS4ujMtMTDkuKrlrZfnrKYpIik7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnBob25lX251bWJlci5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCLmiYvmnLrlj7fkuI3lvpfkuLrnqboiKTsKICAgICAgfSBlbHNlIGlmICghL14xWzMtOV1cZHs5fSQvLnRlc3QodGhpcy5waG9uZV9udW1iZXIpKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgi6K+36L6T5YWl5Lit5Zu95aSn6ZmG55qE5omL5py65Y+3KDEx5L2N77yM56ys5LiA5L2N5Li6Me+8jOesrOS6jOS9jeS4ujMtOeWFtuS4reS5i+S4gCkiKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZW1haWwubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgiRS1tYWls5LiN5b6X5Li656m6Iik7CiAgICAgIH0gZWxzZSBpZiAoIS9eW2EtekEtWjAtOS5fJSstXStAW2EtekEtWjAtOS4tXStcLlthLXpBLVpdezIsfSQvLnRlc3QodGhpcy5lbWFpbCkpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCLor7fovpPlhaXmraPnoa7nmoRFLW1haWwo55So5oi35ZCNK0Ar5Z+f5ZCNKSIpOwogICAgICB9CgogICAgICBpZiAodGhpcy5wYXNzd29yZC5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCLor7fovpPlhaXlr4bnoIHku6Xmm7TmlLkiKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubmV3X3Bhc3N3b3JkICE9PSB0aGlzLm5ld19wYXNzd29yZDIpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCLkuKTmrKHovpPlhaXnmoTmlrDlr4bnoIHkuI3kuIDoh7QiKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLm5ld19wYXNzd29yZC5sZW5ndGggPT09IDApIHt9IGVsc2UgaWYgKCEvXig/PS4qW2EtekEtWl0pKD89LipcZCl8KD89LipcZCkoPz0uKlstX10pfCg/PS4qW2EtekEtWl0pKD89LipbLV9dKVthLXpBLVpcZC1fXXs2LDMyfSQvLnRlc3QodGhpcy5uZXdfcGFzc3dvcmQpKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgi6K+36L6T5YWl5ruh6Laz6KaB5rGC55qE5paw5a+G56CBKDYtMzLkuKrlrZfnrKbvvIzoh7PlsJHljIXlkKvlrZfmr43jgIHmlbDlrZfmiJbogIXvvIgtX++8ieS4reeahOiHs+WwkeS4pOenjSkiKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZXJyb3JzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIC8v5o6l5Y+jCiAgICAgICAgdmFyIGZvcm1EYXRhID0gewogICAgICAgICAgYXV0aG9yaXplOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhdXRob3JpemUiKSB8fCAie30iKSwKICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLAogICAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgICBwaG9uZV9udW1iZXI6IHRoaXMucGhvbmVfbnVtYmVyLAogICAgICAgICAgY3VycmVudF9wYXNzd29yZDogdGhpcy5wYXNzd29yZCwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLm5ld19wYXNzd29yZAogICAgICAgIH07CiAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEpOwogICAgICAgIGF4aW9zLnBvc3QoIi9hcGkvbW9kaWZ5IiwgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CgogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgdG9hc3QoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICLmm7TmlrDmiJDlip/vvIEiLAogICAgICAgICAgICAgIHR5cGU6ICJpcy1zdWNjZXNzIiwKICAgICAgICAgICAgICBkaXNtaXNzaWJsZTogdHJ1ZSwKICAgICAgICAgICAgICBwYXVzZU9uSG92ZXI6IHRydWUsCiAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDAsCiAgICAgICAgICAgICAgcG9zaXRpb246ICJib3R0b20tcmlnaHQiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdG9hc3QoewogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSwKICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgZGlzbWlzc2libGU6IHRydWUsCiAgICAgICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwLAogICAgICAgICAgICAgIHBvc2l0aW9uOiAiYm90dG9tLXJpZ2h0IgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICBfdGhpczIuZXJyb3JzLnB1c2goZXJyb3IucmVzcG9uc2UuZGF0YSk7CgogICAgICAgICAgICBjb25zb2xlLmxvZyhmb3JtRGF0YSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UpIHsKICAgICAgICAgICAgX3RoaXMyLmVycm9ycy5wdXNoKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/src/views/PersonalInfo.vue"],"names":[],"mappings":"AAiHE,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,KAAT,QAAsB,aAAtB;AACA,eAAe;AACb,EAAA,IAAI,EAAE,cADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,OAAO,EAAE,KADJ;AAEL,MAAA,OAAO,EAAE,EAFJ;AAGL,MAAA,QAAQ,EAAE,EAHL;AAIL,MAAA,YAAY,EAAE,EAJT;AAKL,MAAA,KAAK,EAAE,EALF;AAML,MAAA,QAAQ,EAAE,EANL;AAOL,MAAA,YAAY,EAAE,EAPT;AAQL,MAAA,aAAa,EAAE,EARV;AASL,MAAA,MAAM,EAAE;AATH,KAAP;AAWD,GAdY;AAeb,EAAA,OAfa,qBAeH;AACR,IAAA,QAAQ,CAAC,KAAT,GAAiB,MAAjB,CADQ,CAER;;AACA,SAAK,OAAL;AACD,GAnBY;AAoBb,EAAA,OAAO,EAAE;AACP,IAAA,OADO,qBACG;AAAA;;AACR,UAAI,QAAO,GAAI;AACb,QAAA,SAAS,EAAE,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,WAArB,KAAqC,IAAhD;AADE,OAAf;AAGA,MAAA,KAAK,CAAC,IAAN,CAAW,WAAX,EAAwB,QAAxB,EAAkC,IAAlC,CAAuC,UAAC,QAAD,EAAc;AACnD,QAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;AACA,QAAA,KAAI,CAAC,OAAL,GAAe,QAAQ,CAAC,IAAT,CAAc,MAA7B;AACA,QAAA,KAAI,CAAC,QAAL,GAAgB,QAAQ,CAAC,IAAT,CAAc,QAA9B;AACA,QAAA,KAAI,CAAC,YAAL,GAAoB,QAAQ,CAAC,IAAT,CAAc,KAAlC;AACA,QAAA,KAAI,CAAC,KAAL,GAAa,QAAQ,CAAC,IAAT,CAAc,KAA3B;AACD,OAND;AAOD,KAZM;AAaP,IAAA,aAbO,2BAaS;AACd,WAAK,OAAL,GAAe,IAAf;AACD,KAfM;AAgBP,IAAA,YAhBO,0BAgBQ;AACb,WAAK,OAAL,GAAe,KAAf;AACD,KAlBM;AAmBP,IAAA,UAnBO,wBAmBM;AAAA;;AACX;AACA,WAAK,MAAL,GAAc,EAAd;;AACA,UAAI,KAAK,QAAL,CAAc,MAAd,KAAyB,CAA7B,EAAgC;AAC9B,aAAK,MAAL,CAAY,IAAZ,CAAiB,SAAjB;AACF,OAFA,MAEO,IAAI,CAAC,QAAQ,IAAR,CAAa,KAAK,QAAlB,CAAD,IAAgC,KAAK,QAAL,CAAc,MAAd,GAAuB,EAAvD,IAA6D,KAAK,QAAL,CAAc,MAAd,GAAuB,CAAxF,EAA2F;AAChG,aAAK,MAAL,CAAY,IAAZ,CAAiB,gCAAjB;AACF;;AACA,UAAI,KAAK,YAAL,CAAkB,MAAlB,KAA6B,CAAjC,EAAoC;AAClC,aAAK,MAAL,CAAY,IAAZ,CAAiB,SAAjB;AACF,OAFA,MAEO,IAAI,CAAC,gBAAgB,IAAhB,CAAqB,KAAK,YAA1B,CAAL,EAA8C;AACnD,aAAK,MAAL,CAAY,IAAZ,CAAiB,oCAAjB;AACF;;AACA,UAAI,KAAK,KAAL,CAAW,MAAX,KAAsB,CAA1B,EAA6B;AAC3B,aAAK,MAAL,CAAY,IAAZ,CAAiB,YAAjB;AACF,OAFA,MAEO,IAAI,CAAC,mDAAmD,IAAnD,CAAwD,KAAK,KAA7D,CAAL,EAA0E;AAC/E,aAAK,MAAL,CAAY,IAAZ,CAAiB,wBAAjB;AACF;;AACA,UAAI,KAAK,QAAL,CAAc,MAAd,KAAyB,CAA7B,EAAgC;AAC9B,aAAK,MAAL,CAAY,IAAZ,CAAiB,UAAjB;AACF;;AACA,UAAI,KAAK,YAAL,KAAsB,KAAK,aAA/B,EAA8C;AAC5C,aAAK,MAAL,CAAY,IAAZ,CAAiB,aAAjB;AACF,OAFA,MAEO,IAAI,KAAK,YAAL,CAAkB,MAAlB,KAA6B,CAAjC,EAAoC,CAC3C,CADO,MACA,IACL,CAAC,yFAAyF,IAAzF,CACC,KAAK,YADN,CADI,EAIL;AACA,aAAK,MAAL,CAAY,IAAZ,CAAiB,4CAAjB;AACF;;AACA,UAAI,KAAK,MAAL,CAAY,MAAZ,KAAuB,CAA3B,EAA8B;AAC5B;AACA,YAAI,QAAO,GAAI;AACb,UAAA,SAAS,EAAE,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,WAArB,KAAqC,IAAhD,CADE;AAEb,UAAA,QAAQ,EAAE,KAAK,QAFF;AAGb,UAAA,KAAK,EAAE,KAAK,KAHC;AAIb,UAAA,YAAY,EAAE,KAAK,YAJN;AAKb,UAAA,gBAAgB,EAAE,KAAK,QALV;AAMb,UAAA,QAAQ,EAAE,KAAK;AANF,SAAf;AAQA,QAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;AACA,QAAA,KAAI,CACD,IADH,CACQ,aADR,EACuB,QADvB,EAEG,IAFH,CAEQ,UAAC,QAAD,EAAc;AAClB,UAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;;AACA,cAAI,QAAQ,CAAC,MAAT,IAAmB,GAAvB,EAA4B;AAC1B,YAAA,KAAK,CAAC;AACJ,cAAA,OAAO,EAAE,OADL;AAEJ,cAAA,IAAI,EAAE,YAFF;AAGJ,cAAA,WAAW,EAAE,IAHT;AAIJ,cAAA,YAAY,EAAE,IAJV;AAKJ,cAAA,QAAQ,EAAE,IALN;AAMJ,cAAA,QAAQ,EAAE;AANN,aAAD,CAAL;AAQF,WATA,MASO;AACL,YAAA,KAAK,CAAC;AACJ,cAAA,OAAO,EAAE,QAAQ,CAAC,IAAT,CAAc,OADnB;AAEJ,cAAA,IAAI,EAAE,SAFF;AAGJ,cAAA,WAAW,EAAE,IAHT;AAIJ,cAAA,YAAY,EAAE,IAJV;AAKJ,cAAA,QAAQ,EAAE,IALN;AAMJ,cAAA,QAAQ,EAAE;AANN,aAAD,CAAL;AAQF;AACD,SAvBH,WAwBS,UAAC,KAAD,EAAW;AAChB,cAAI,KAAK,CAAC,QAAV,EAAoB;AAClB,YAAA,MAAI,CAAC,MAAL,CAAY,IAAZ,CAAiB,KAAK,CAAC,QAAN,CAAe,IAAhC;;AACA,YAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;AACF,WAHA,MAGO,IAAI,KAAK,CAAC,OAAV,EAAmB;AACxB,YAAA,MAAI,CAAC,MAAL,CAAY,IAAZ,CAAiB,KAAK,CAAC,OAAvB;AACF;AACD,SA/BH;AAgCF;AACD;AA9FM;AApBI,CAAf","sourcesContent":["<template>\n  <div class=\"page-personal-info\">\n    <div class=\"columns is-mobile\">\n      <div class=\"column is-half is-offset-one-quarter\">\n        <form v-if=\"!changed\" @submit.prevent=\"changed = true\">\n          <h1 class=\"title\">个人信息</h1>\n          <div class=\"field\">\n            <label>用户名</label>\n            <div class=\"control\">\n              <input type=\"text\" class=\"input\" v-model=\"username\" readonly />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <label>手机号</label>\n            <div class=\"control\">\n              <input type=\"text\" class=\"input\" v-model=\"phone_number\" readonly />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <label>邮箱</label>\n            <div class=\"control\">\n              <input type=\"text\" class=\"input\" v-model=\"email\" readonly />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <label>身份证</label>\n            <div class=\"control\">\n              <input type=\"text\" class=\"input\" v-model=\"id_card\" readonly />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <div class=\"control\">\n              <button class=\"button is-dark\">修改信息</button>\n            </div>\n          </div>\n        </form>\n\n        <form v-if=\"changed\" @submit.prevent=\"submitForm\">\n          <h1 class=\"title\">信息修改</h1>\n          <div class=\"field\">\n            <label>用户名</label>\n            <div class=\"control\">\n              <input type=\"text\" class=\"input is-info\" v-model=\"username\" />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <label>手机号</label>\n            <div class=\"control\">\n              <input type=\"text\" class=\"input is-info\" v-model=\"phone_number\" />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <label>邮箱</label>\n            <div class=\"control\">\n              <input type=\"text\" class=\"input is-info\" v-model=\"email\" />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <label>身份证(禁止修改)</label>\n            <div class=\"control\">\n              <input type=\"text\" class=\"input\" v-model=\"id_card\" readonly />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <label>当前密码</label>\n            <div class=\"control\">\n              <input type=\"password\" class=\"input is-primary\" v-model=\"password\" />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <label>新密码(若无需修改请勿输入内容)</label>\n            <div class=\"control\">\n              <input type=\"password\" class=\"input is-info\" v-model=\"new_password\" />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <label>重复输入新密码</label>\n            <div class=\"control\">\n              <input type=\"password\" class=\"input is-info\" v-model=\"new_password2\" />\n            </div>\n          </div>\n\n          <div class=\"field\">\n            <div class=\"control\">\n              <button class=\"button is-dark\" @click=\"submitForm\">确认修改</button>\n            </div>\n          </div>\n          <div class=\"notification is-danger\" v-if=\"errors.length\">\n            <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n          </div>\n        </form>\n        <hr />\n        <div class=\"field\">\n          <div class=\"control\">\n            <button class=\"button is-dark\" v-if=\"changed\" @click=\"getInfo(), (changed = false)\">取消修改</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import axios from \"axios\";\n  import { toast } from \"bulma-toast\";\n  export default {\n    name: \"PersonalInfo\",\n    data() {\n      return {\n        changed: false,\n        id_card: \"\",\n        username: \"\",\n        phone_number: \"\",\n        email: \"\",\n        password: \"\",\n        new_password: \"\",\n        new_password2: \"\",\n        errors: [],\n      };\n    },\n    mounted() {\n      document.title = \"个人资料\";\n      //在进入页面时获取个人资料\n      this.getInfo();\n    },\n    methods: {\n      getInfo() {\n        var formData = {\n          authorize: JSON.parse(localStorage.getItem(\"authorize\") || \"{}\"),\n        };\n        axios.post(\"/api/info\", formData).then((response) => {\n          console.log(response);\n          this.id_card = response.data.idCard;\n          this.username = response.data.username;\n          this.phone_number = response.data.phone;\n          this.email = response.data.email;\n        });\n      },\n      changeProfile() {\n        this.changed = true;\n      },\n      cancelChange() {\n        this.changed = false;\n      },\n      submitForm() {\n        //前端合规性判断\n        this.errors = [];\n        if (this.username.length === 0) {\n          this.errors.push(\"用户名不得为空\");\n        } else if (!/^\\w+$/.test(this.username) || this.username.length > 10 || this.username.length < 3) {\n          this.errors.push(\"用户名格式不正确(英文、数字、下划线，长度为3-10个字符)\");\n        }\n        if (this.phone_number.length === 0) {\n          this.errors.push(\"手机号不得为空\");\n        } else if (!/^1[3-9]\\d{9}$/.test(this.phone_number)) {\n          this.errors.push(\"请输入中国大陆的手机号(11位，第一位为1，第二位为3-9其中之一)\");\n        }\n        if (this.email.length === 0) {\n          this.errors.push(\"E-mail不得为空\");\n        } else if (!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/.test(this.email)) {\n          this.errors.push(\"请输入正确的E-mail(用户名+@+域名)\");\n        }\n        if (this.password.length === 0) {\n          this.errors.push(\"请输入密码以更改\");\n        }\n        if (this.new_password !== this.new_password2) {\n          this.errors.push(\"两次输入的新密码不一致\");\n        } else if (this.new_password.length === 0) {\n        } else if (\n          !/^(?=.*[a-zA-Z])(?=.*\\d)|(?=.*\\d)(?=.*[-_])|(?=.*[a-zA-Z])(?=.*[-_])[a-zA-Z\\d-_]{6,32}$/.test(\n            this.new_password\n          )\n        ) {\n          this.errors.push(\"请输入满足要求的新密码(6-32个字符，至少包含字母、数字或者（-_）中的至少两种)\");\n        }\n        if (this.errors.length === 0) {\n          //接口\n          var formData = {\n            authorize: JSON.parse(localStorage.getItem(\"authorize\") || \"{}\"),\n            username: this.username,\n            email: this.email,\n            phone_number: this.phone_number,\n            current_password: this.password,\n            password: this.new_password,\n          };\n          console.log(formData);\n          axios\n            .post(\"/api/modify\", formData)\n            .then((response) => {\n              console.log(response);\n              if (response.status == 200) {\n                toast({\n                  message: \"更新成功！\",\n                  type: \"is-success\",\n                  dismissible: true,\n                  pauseOnHover: true,\n                  duration: 2000,\n                  position: \"bottom-right\",\n                });\n              } else {\n                toast({\n                  message: response.data.message,\n                  type: \"warning\",\n                  dismissible: true,\n                  pauseOnHover: true,\n                  duration: 2000,\n                  position: \"bottom-right\",\n                });\n              }\n            })\n            .catch((error) => {\n              if (error.response) {\n                this.errors.push(error.response.data);\n                console.log(formData);\n              } else if (error.message) {\n                this.errors.push(error.message);\n              }\n            });\n        }\n      },\n    },\n  };\n</script>\n"],"sourceRoot":""}]}