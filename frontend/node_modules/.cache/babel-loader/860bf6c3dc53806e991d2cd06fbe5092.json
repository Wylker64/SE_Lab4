{"remainingRequest":"/Users/biyuntian/Desktop/software engineering/git/lab_2/lab2/frontend/node_modules/babel-loader/lib/index.js!/Users/biyuntian/Desktop/software engineering/git/lab_2/lab2/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/biyuntian/Desktop/software engineering/git/lab_2/lab2/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/biyuntian/Desktop/software engineering/git/lab_2/lab2/frontend/src/views/SignUp.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_2/lab2/frontend/src/views/SignUp.vue","mtime":1680170197172},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_2/lab2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1679146657674},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_2/lab2/frontend/node_modules/babel-loader/lib/index.js","mtime":1679146657623},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_2/lab2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1679146657674},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_2/lab2/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1679146659113}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtaW50LmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdidWxtYS10b2FzdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2lnblVwJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcm5hbWU6ICcnLAogICAgICBwaG9uZV9udW1iZXI6ICcnLAogICAgICBpZF9jYXJkOiAnJywKICAgICAgZW1haWw6ICcnLAogICAgICBwYXNzd29yZDogJycsCiAgICAgIHBhc3N3b3JkMjogJycsCiAgICAgIGVycm9yczogW10KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgZG9jdW1lbnQudGl0bGUgPSAnU2lnbiBVcCc7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5lcnJvcnMgPSBbXTsKCiAgICAgIGlmICghL15cdyskLy50ZXN0KHRoaXMudXNlcm5hbWUpIHx8IHRoaXMudXNlcm5hbWUubGVuZ3RoID4gMTAgfHwgdGhpcy51c2VybmFtZS5sZW5ndGggPCAzKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgn55So5oi35ZCN5qC85byP5LiN5q2j56GuKOiLseaWh+OAgeaVsOWtl+OAgeS4i+WIkue6v++8jOmVv+W6puS4ujMtMTDkuKrlrZfnrKYpJyk7CiAgICAgIH0KCiAgICAgIGlmICghL14xWzMtOV1cZHs5fSQvLnRlc3QodGhpcy5waG9uZV9udW1iZXIpKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgn6K+36L6T5YWl5Lit5Zu95aSn6ZmG55qE5omL5py65Y+3KDEx5L2N77yM56ys5LiA5L2N5Li6Me+8jOesrOS6jOS9jeS4ujMtOeWFtuS4reS5i+S4gCknKTsKICAgICAgfQoKICAgICAgaWYgKCEvXlsxLTldXGR7MTZ9KFh8XGQpJC8udGVzdCh0aGlzLmlkX2NhcmQpKSB7CiAgICAgICAgY29uc29sZS5sb2coKTsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCfor7fovpPlhaXmraPnoa7nmoTkuK3lm73ouqvku73or4Hlj7fvvIzkuIDlhbExOOS9jScpOwogICAgICB9CgogICAgICBpZiAoIS9eW2EtekEtWjAtOS5fJSstXStAW2EtekEtWjAtOS4tXStcLlthLXpBLVpdezIsfSQvLnRlc3QodGhpcy5lbWFpbCkpIHsKICAgICAgICBjb25zb2xlLmxvZygpOwogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goJ+ivt+i+k+WFpeato+ehrueahEUtbWFpbCjnlKjmiLflkI0rQCvln5/lkI0pJyk7CiAgICAgIH0KCiAgICAgIGlmICghL14oPz0uKlthLXpBLVpdKSg/PS4qXGQpfCg/PS4qXGQpKD89LipbLV9dKXwoPz0uKlthLXpBLVpdKSg/PS4qWy1fXSlbYS16QS1aXGQtX117NiwzMn0kLy50ZXN0KHRoaXMucGFzc3dvcmQpKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgn6K+36L6T5YWl5ruh6Laz6KaB5rGC55qE5a+G56CBKDYtMzLkuKrlrZfnrKbvvIzoh7PlsJHljIXlkKvlrZfmr43jgIHmlbDlrZfmiJbogIXvvIgtX++8ieS4reeahOiHs+WwkeS4pOenjSknKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucGFzc3dvcmQgIT09IHRoaXMucGFzc3dvcmQyKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgn5Lik5qyh6L6T5YWl55qE5a+G56CB5LiN5LiA5qC3Jyk7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZXJyb3JzKTsKCiAgICAgIGlmICghdGhpcy5lcnJvcnMubGVuZ3RoKSB7CiAgICAgICAgdmFyIGZvcm1EYXRhID0gewogICAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsCiAgICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZCwKICAgICAgICAgIHBob25lX251bWJlcjogdGhpcy5waG9uZV9udW1iZXIsCiAgICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCwKICAgICAgICAgIGlkX2NhcmQ6IHRoaXMuaWRfY2FyZCwKICAgICAgICAgIGlkZW50aXR5OiBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaWRlbnRpdHkiKS52YWx1ZSkKICAgICAgICB9OwogICAgICAgIGF4aW9zLnBvc3QoJy9hcGkvcmVnaXN0ZXInLCBmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKCiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICB0b2FzdCh7CiAgICAgICAgICAgICAgbWVzc2FnZTogJ+i0puWPt+aIkOWKn+azqOWGjO+8jOWPr+S7peeZu+mZhuS6hu+8gScsCiAgICAgICAgICAgICAgdHlwZTogJ2lzLXN1Y2Nlc3MnLAogICAgICAgICAgICAgIGRpc21pc3NpYmxlOiB0cnVlLAogICAgICAgICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSwKICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1yaWdodCcKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goJy9sb2ctaW4nKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRvYXN0KHsKICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5zdGF0dXMsCiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgICAgIGRpc21pc3NpYmxlOiB0cnVlLAogICAgICAgICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSwKICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1yaWdodCcKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgLy8gZm9yIChjb25zdCBwcm9wZXJ0eSBpbiBlcnJvci5yZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgIC8vIHRoaXMuZXJyb3JzLnB1c2goYCR7cHJvcGVydHl9OiAke2Vycm9yLnJlc3BvbnNlLmRhdGFbcHJvcGVydHldfWApCiAgICAgICAgICAgIF90aGlzLmVycm9ycy5wdXNoKEpTT04uc3RyaW5naWZ5KGVycm9yLnJlc3BvbnNlLmRhdGEpKTsgLy8gfQoKCiAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGVycm9yLnJlc3BvbnNlKSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UpIHsKICAgICAgICAgICAgX3RoaXMuZXJyb3JzLnB1c2goZXJyb3IubWVzc2FnZSk7CgogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/biyuntian/Desktop/software engineering/git/lab_2/lab2/frontend/src/views/SignUp.vue"],"names":[],"mappings":";AAkFA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,KAAT,QAAsB,aAAtB;AACA,eAAe;AACX,EAAA,IAAI,EAAE,QADK;AAEX,EAAA,IAFW,kBAEJ;AACH,WAAO;AACH,MAAA,QAAQ,EAAE,EADP;AAEH,MAAA,YAAY,EAAE,EAFX;AAGH,MAAA,OAAO,EAAE,EAHN;AAIH,MAAA,KAAK,EAAE,EAJJ;AAKH,MAAA,QAAQ,EAAE,EALP;AAMH,MAAA,SAAS,EAAE,EANR;AAOH,MAAA,MAAM,EAAE;AAPL,KAAP;AASH,GAZU;AAaX,EAAA,OAbW,qBAaD;AACN,IAAA,QAAQ,CAAC,KAAT,GAAiB,SAAjB;AAEH,GAhBU;AAiBX,EAAA,OAAO,EAAE;AACL,IAAA,UADK,wBACQ;AAAA;;AACT,WAAK,MAAL,GAAc,EAAd;;AACA,UAAI,CAAC,QAAQ,IAAR,CAAa,KAAK,QAAlB,CAAD,IAA8B,KAAK,QAAL,CAAc,MAAd,GAAqB,EAAnD,IAAuD,KAAK,QAAL,CAAc,MAAd,GAAqB,CAAhF,EAAmF;AAC/E,aAAK,MAAL,CAAY,IAAZ,CAAiB,gCAAjB;AACJ;;AAEA,UAAI,CAAC,gBAAgB,IAAhB,CAAqB,KAAK,YAA1B,CAAL,EAA8C;AAE1C,aAAK,MAAL,CAAY,IAAZ,CAAiB,oCAAjB;AACJ;;AAEA,UAAI,CAAC,sBAAsB,IAAtB,CAA2B,KAAK,OAAhC,CAAL,EAA+C;AAC3C,QAAA,OAAO,CAAC,GAAR;AACA,aAAK,MAAL,CAAY,IAAZ,CAAiB,oBAAjB;AACJ;;AAEA,UAAI,CAAC,mDAAmD,IAAnD,CAAwD,KAAK,KAA7D,CAAL,EAA0E;AACtE,QAAA,OAAO,CAAC,GAAR;AACA,aAAK,MAAL,CAAY,IAAZ,CAAiB,wBAAjB;AACJ;;AAGA,UAAI,CAAC,yFAAyF,IAAzF,CAA8F,KAAK,QAAnG,CAAL,EAAmH;AAC/G,aAAK,MAAL,CAAY,IAAZ,CAAiB,2CAAjB;AACJ;;AAGA,UAAI,KAAK,QAAL,KAAkB,KAAK,SAA3B,EAAsC;AAClC,aAAK,MAAL,CAAY,IAAZ,CAAiB,YAAjB;AACJ;;AACA,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,MAAjB;;AAGA,UAAI,CAAC,KAAK,MAAL,CAAY,MAAjB,EAAyB;AAEjB,YAAI,QAAO,GAAK;AAChB,UAAA,QAAQ,EAAE,KAAK,QADC;AAEhB,UAAA,QAAQ,EAAE,KAAK,QAFC;AAGhB,UAAA,YAAY,EAAE,KAAK,YAHH;AAIhB,UAAA,KAAK,EAAE,KAAK,KAJI;AAKhB,UAAA,OAAO,EAAE,KAAK,OALE;AAMhB,UAAA,QAAQ,EAAE,QAAQ,CAAC,QAAQ,CAAC,cAAT,CAAwB,UAAxB,EAAoC,KAArC;AANF,SAAhB;AAWJ,QAAA,KAAI,CACC,IADL,CACU,eADV,EAC2B,QAD3B,EAEK,IAFL,CAEU,UAAA,QAAO,EAAK;AACd,UAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;;AACA,cAAI,QAAQ,CAAC,MAAT,IAAmB,GAAvB,EAA2B;AACvB,YAAA,KAAK,CAAC;AACN,cAAA,OAAO,EAAE,eADH;AAEN,cAAA,IAAI,EAAE,YAFA;AAGN,cAAA,WAAW,EAAE,IAHP;AAIN,cAAA,YAAY,EAAE,IAJR;AAKN,cAAA,QAAQ,EAAE,IALJ;AAMN,cAAA,QAAQ,EAAE;AANJ,aAAD,CAAL;;AASJ,YAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,SAAlB;AACA,WAXA,MAWM;AACF,YAAA,KAAK,CAAC;AACN,cAAA,OAAO,EAAE,QAAQ,CAAC,MADZ;AAEN,cAAA,IAAI,EAAE,SAFA;AAGN,cAAA,WAAW,EAAE,IAHP;AAIN,cAAA,YAAY,EAAE,IAJR;AAKN,cAAA,QAAQ,EAAE,IALJ;AAMN,cAAA,QAAQ,EAAE;AANJ,aAAD,CAAL;AAUJ;AACH,SA3BL,WA4BW,UAAA,KAAI,EAAK;AACZ,cAAI,KAAK,CAAC,QAAV,EAAoB;AAChB;AACI;AACA,YAAA,KAAI,CAAC,MAAL,CAAY,IAAZ,CAAiB,IAAI,CAAC,SAAL,CAAe,KAAK,CAAC,QAAN,CAAe,IAA9B,CAAjB,EAHY,CAIhB;;;AAEA,YAAA,OAAO,CAAC,GAAR,CAAY,IAAI,CAAC,SAAL,CAAe,KAAK,CAAC,QAArB,CAAZ;AACJ,WAPA,MAOO,IAAI,KAAK,CAAC,OAAV,EAAmB;AAEtB,YAAA,KAAI,CAAC,MAAL,CAAY,IAAZ,CAAiB,KAAK,CAAC,OAAvB;;AAEA,YAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;AACJ;AACH,SA1CL;AA2CJ;AACJ;AA3FK;AAjBE,CAAf","sourcesContent":["<template>\n    <div class=\"page-sign-up\">\n        <div class=\"columns\">\n            <div class=\"column is-4 is-offset-4\">\n                <h1 class=\"title\">注册</h1>\n\n                <form @submit.prevent=\"submitForm\">\n                    <div class = \"field\">\n                    <label>选择你的角色</label>\n                    <div class = \"control\">\n                        <div class = \"select is-primary\">\n                            <select id=\"identity\">\n                                <option value=\"0\">买家</option>\n                                <option value=\"1\" >卖家</option>\n                            </select>\n                        </div>\n                    </div>\n                    </div>\n\n\n                    <div class=\"field\">\n                        <label>用户名</label>\n                        <div class=\"control\">\n                            <input type=\"text\" class=\"input\" v-model=\"username\">\n                        </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>手机号</label>\n                        <div class=\"control\">\n                            <input type=\"text\" class=\"input\" v-model=\"phone_number\">\n                        </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>身份证号</label>\n                        <div class=\"control\">\n                            <input type=\"text\" class=\"input\" v-model=\"id_card\">\n                        </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>邮箱</label>\n                        <div class=\"control\">\n                            <input type=\"text\" class=\"input\" v-model=\"email\">\n                        </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>密码</label>\n                        <div class=\"control\">\n                            <input type=\"password\" class=\"input\" v-model=\"password\">\n                        </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>重复输入密码</label>\n                        <div class=\"control\">\n                            <input type=\"password\" class=\"input\" v-model=\"password2\">\n                        </div>\n                    </div>\n\n                    <div class=\"notification is-danger\" v-if=\"errors.length\">\n                        <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                    </div>\n\n                    <div class=\"field\">\n                        <div class=\"control\">\n                            <button class=\"button is-dark\">注册！</button>\n                        </div>\n                    </div>\n\n                    <hr>\n\n                    <router-link to=\"/log-in\">点击这里</router-link> 登陆!\n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { toast } from 'bulma-toast'\nexport default {\n    name: 'SignUp',\n    data() {\n        return {\n            username: '',\n            phone_number: '',\n            id_card: '',\n            email: '',\n            password: '',\n            password2: '',\n            errors: []\n        }\n    },\n    mounted() {\n        document.title = 'Sign Up';\n\n    },\n    methods: {\n        submitForm() {\n            this.errors = []\n            if (!/^\\w+$/.test(this.username)||this.username.length>10||this.username.length<3) {\n                this.errors.push('用户名格式不正确(英文、数字、下划线，长度为3-10个字符)')\n            }\n\n            if (!/^1[3-9]\\d{9}$/.test(this.phone_number)) {\n                \n                this.errors.push('请输入中国大陆的手机号(11位，第一位为1，第二位为3-9其中之一)')\n            }\n\n            if (!/^[1-9]\\d{16}(X|\\d)$/.test(this.id_card)) {\n                console.log()\n                this.errors.push('请输入正确的中国身份证号，一共18位')\n            }\n            \n            if (!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/.test(this.email)) {\n                console.log()\n                this.errors.push('请输入正确的E-mail(用户名+@+域名)')\n            }\n\n   \n            if (!/^(?=.*[a-zA-Z])(?=.*\\d)|(?=.*\\d)(?=.*[-_])|(?=.*[a-zA-Z])(?=.*[-_])[a-zA-Z\\d-_]{6,32}$/.test(this.password)) {\n                this.errors.push('请输入满足要求的密码(6-32个字符，至少包含字母、数字或者（-_）中的至少两种)')\n            }\n\n\n            if (this.password !== this.password2) {\n                this.errors.push('两次输入的密码不一样')\n            }\n            console.log(this.errors)\n\n\n            if (!this.errors.length) {\n                \n                    var formData =  {\n                    username: this.username,\n                    password: this.password,\n                    phone_number: this.phone_number,\n                    email: this.email,\n                    id_card: this.id_card,\n                    identity: parseInt(document.getElementById(\"identity\").value),\n                }\n                \n\n\n                axios\n                    .post('/api/register', formData)\n                    .then(response => {\n                        console.log(response)\n                        if (response.status == 200){\n                            toast({\n                            message: '账号成功注册，可以登陆了！',\n                            type: 'is-success',\n                            dismissible: true,\n                            pauseOnHover: true,\n                            duration: 2000,\n                            position: 'bottom-right',\n                            \n                        })\n                        this.$router.push('/log-in')\n                        } else{\n                            toast({\n                            message: response.status,\n                            type: 'warning',\n                            dismissible: true,\n                            pauseOnHover: true,\n                            duration: 2000,\n                            position: 'bottom-right',\n                            \n                        })\n\n                        }\n                    })\n                    .catch(error => {\n                        if (error.response) {\n                            // for (const property in error.response.data) {\n                                // this.errors.push(`${property}: ${error.response.data[property]}`)\n                                this.errors.push(JSON.stringify(error.response.data))\n                            // }\n\n                            console.log(JSON.stringify(error.response))\n                        } else if (error.message) {\n                            \n                            this.errors.push(error.message)\n                            \n                            console.log(response)\n                        }\n                    })\n            }\n        }\n    }\n}\n</script>"],"sourceRoot":""}]}