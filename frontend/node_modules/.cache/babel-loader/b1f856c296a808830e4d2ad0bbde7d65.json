{"remainingRequest":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/babel-loader/lib/index.js!/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/src/views/Cart.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/src/views/Cart.vue","mtime":1682239879877},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/babel-loader/lib/index.js","mtime":1681917295923},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1681917297993}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgdG9hc3QgfSBmcm9tICJidWxtYS10b2FzdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2FydCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGl0ZW1zOiBbXSwKICAgICAgcGFnZV9udW06IDEsCiAgICAgIHRvdGFsX3BhZ2VzOiAwCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGRvY3VtZW50LnRpdGxlID0gIui0reeJqei9piI7CiAgICB0aGlzLmdldE9yZGVyKCk7IC8vIHRoaXMuY2FydCA9IHRoaXMuJHN0b3JlLnN0YXRlLmNhcnQKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldE9yZGVyOiBmdW5jdGlvbiBnZXRPcmRlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBmb3JtRGF0YSA9IHsKICAgICAgICBwYWdlX251bTogdGhpcy5wYWdlX251bSwKICAgICAgICBhdXRob3JpemU6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhvcml6ZSIpIHx8ICJ7fSIpCiAgICAgIH07CiAgICAgIGNvbnNvbGUubG9nKGZvcm1EYXRhKTsKICAgICAgYXhpb3MucG9zdCgiL2FwaS9jYXJ0IiwgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMudG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLnRvdGFsX3BhZ2VzOwogICAgICAgIF90aGlzLml0ZW1zID0gcmVzcG9uc2UuZGF0YS5pdGVtczsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgImRlbGV0ZSI6IGZ1bmN0aW9uIF9kZWxldGUocHJvZHVjdF9pZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBmb3JtRGF0YSA9IHsKICAgICAgICBpdGVtX2lkOiBwcm9kdWN0X2lkLAogICAgICAgIGl0ZW1faWRfbGlzdDogW10sCiAgICAgICAgYXV0aG9yaXplOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhdXRob3JpemUiKSB8fCAie30iKQogICAgICB9OwogICAgICBheGlvcy5wb3N0KCIvYXBpL2NhcnQvZGVsZXRlIiwgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICB0b2FzdCh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICLku47otK3nianovabliKDpmaTmiJDlip/vvIEiLAogICAgICAgICAgICB0eXBlOiAiaXMtc3VjY2VzcyIsCiAgICAgICAgICAgIGRpc21pc3NpYmxlOiB0cnVlLAogICAgICAgICAgICBwYXVzZU9uSG92ZXI6IHRydWUsCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwLAogICAgICAgICAgICBwb3NpdGlvbjogImJvdHRvbS1yaWdodCIKICAgICAgICAgIH0pOwogICAgICAgICAgX3RoaXMyLmdldE9yZGVyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0b2FzdCh7CiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLnN0YXR1cywKICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICBkaXNtaXNzaWJsZTogdHJ1ZSwKICAgICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgICAgICAgcG9zaXRpb246ICJib3R0b20tcmlnaHQiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/src/views/Cart.vue"],"names":[],"mappings":"AAgEE,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,KAAT,QAAsB,aAAtB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,MADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,KAAK,EAAE,EADF;AAEL,MAAA,QAAQ,EAAE,CAFL;AAGL,MAAA,WAAW,EAAE;AAHR,KAAP;AAKD,GARY;AASb,EAAA,OATa,qBASH;AACR,IAAA,QAAQ,CAAC,KAAT,GAAiB,KAAjB;AACA,SAAK,QAAL,GAFQ,CAGR;AACD,GAbY;AAcb,EAAA,OAAO,EAAE;AACP,IAAA,QADO,sBACI;AAAA;;AACT,UAAI,QAAO,GAAI;AACb,QAAA,QAAQ,EAAE,KAAK,QADF;AAEb,QAAA,SAAS,EAAE,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,WAArB,KAAqC,IAAhD;AAFE,OAAf;AAIA,MAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;AACA,MAAA,KAAI,CACD,IADH,CACQ,WADR,EACqB,QADrB,EAEG,IAFH,CAEQ,UAAC,QAAD,EAAc;AAClB,QAAA,KAAI,CAAC,WAAL,GAAmB,QAAQ,CAAC,IAAT,CAAc,WAAjC;AACA,QAAA,KAAI,CAAC,KAAL,GAAa,QAAQ,CAAC,IAAT,CAAc,KAA3B;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;AACD,OANH,WAOS,UAAC,KAAD,EAAW;AAChB,QAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACD,OATH;AAUD,KAjBM;AAAA,+BAkBA,UAlBA,EAkBY;AAAA;;AACjB,UAAI,QAAO,GAAI;AACb,QAAA,OAAO,EAAE,UADI;AAEb,QAAA,YAAY,EAAE,EAFD;AAGb,QAAA,SAAS,EAAE,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,WAArB,KAAqC,IAAhD;AAHE,OAAf;AAKA,MAAA,KAAI,CACD,IADH,CACQ,kBADR,EAC4B,QAD5B,EAEG,IAFH,CAEQ,UAAC,QAAD,EAAc;AAClB,YAAI,QAAQ,CAAC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,UAAA,KAAK,CAAC;AACJ,YAAA,OAAO,EAAE,WADL;AAEJ,YAAA,IAAI,EAAE,YAFF;AAGJ,YAAA,WAAW,EAAE,IAHT;AAIJ,YAAA,YAAY,EAAE,IAJV;AAKJ,YAAA,QAAQ,EAAE,IALN;AAMJ,YAAA,QAAQ,EAAE;AANN,WAAD,CAAL;AAQA,UAAA,MAAI,CAAC,QAAL;AACF,SAVA,MAUO;AACL,UAAA,KAAK,CAAC;AACJ,YAAA,OAAO,EAAE,QAAQ,CAAC,MADd;AAEJ,YAAA,IAAI,EAAE,SAFF;AAGJ,YAAA,WAAW,EAAE,IAHT;AAIJ,YAAA,YAAY,EAAE,IAJV;AAKJ,YAAA,QAAQ,EAAE,IALN;AAMJ,YAAA,QAAQ,EAAE;AANN,WAAD,CAAL;AAQF;AACD,OAvBH,WAwBS,UAAC,KAAD,EAAW;AAChB,QAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACD,OA1BH;AA2BD;AAnDM;AAdI,CAAf","sourcesContent":["<template>\n  <div class=\"page-cart\">\n    <div class=\"columns\">\n      <div class=\"column is-7\">\n        <h1 class=\"title\">我的购物车</h1>\n\n        <form @submit.prevent=\"getOrder\">\n          <div class=\"column is-3\">\n            <div class=\"field\">\n              <label>页码/共{{ total_pages }}页</label>\n              <div class=\"control\">\n                <input type=\"text\" class=\"input\" v-model=\"page_num\" />\n              </div>\n            </div>\n            <div class=\"field\">\n              <div class=\"control\">\n                <button class=\"button is-dark\">搜索</button>\n              </div>\n            </div>\n          </div>\n        </form>\n        <table class=\"table is-fullwidth\">\n          <thead>\n            <tr>\n              <th>\n                <input type=\"checkbox\" @change=\"toggleAll\" />\n              </th>\n              <th>商品名称</th>\n              <th>商品价格</th>\n              <th>个数</th>\n              <th>花费</th>\n              <th>状态</th>\n              <th>操作</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in items\" v-bind:key=\"item.product_id\">\n              <td>\n                <input type=\"checkbox\" v-model=\"item.checked\" />\n              </td>\n              <td>{{ item.name }}</td>\n              <td>{{ item.price }}</td>\n              <td>{{ item.count }}</td>\n              <td>{{ item.price * item.count }}</td>\n              <td v-if=\"item.valid\">有效</td>\n              <td v-if=\"!item.valid\">已失效</td>\n              <td><button @click=\"delete item.product_id\">删除</button></td>\n            </tr>\n          </tbody>\n        </table>\n        <div class=\"field is-grouped\">\n          <div class=\"control\">\n            <button class=\"button is-dark\" @click=\"executePayment\">付款</button>\n          </div>\n          <div class=\"control\">\n            <button class=\"button is-danger\" @click=\"executeDelete\">删除</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import axios from \"axios\";\n  import { toast } from \"bulma-toast\";\n\n  export default {\n    name: \"Cart\",\n    data() {\n      return {\n        items: [],\n        page_num: 1,\n        total_pages: 0,\n      };\n    },\n    mounted() {\n      document.title = \"购物车\";\n      this.getOrder();\n      // this.cart = this.$store.state.cart\n    },\n    methods: {\n      getOrder() {\n        var formData = {\n          page_num: this.page_num,\n          authorize: JSON.parse(localStorage.getItem(\"authorize\") || \"{}\"),\n        };\n        console.log(formData);\n        axios\n          .post(\"/api/cart\", formData)\n          .then((response) => {\n            this.total_pages = response.data.total_pages;\n            this.items = response.data.items;\n            console.log(response);\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      },\n      delete(product_id) {\n        var formData = {\n          item_id: product_id,\n          item_id_list: [],\n          authorize: JSON.parse(localStorage.getItem(\"authorize\") || \"{}\"),\n        };\n        axios\n          .post(\"/api/cart/delete\", formData)\n          .then((response) => {\n            if (response.status === 200) {\n              toast({\n                message: \"从购物车删除成功！\",\n                type: \"is-success\",\n                dismissible: true,\n                pauseOnHover: true,\n                duration: 2000,\n                position: \"bottom-right\",\n              });\n              this.getOrder;\n            } else {\n              toast({\n                message: response.status,\n                type: \"warning\",\n                dismissible: true,\n                pauseOnHover: true,\n                duration: 2000,\n                position: \"bottom-right\",\n              });\n            }\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      },\n    },\n  };\n</script>\n"],"sourceRoot":""}]}