{"remainingRequest":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/babel-loader/lib/index.js!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/views/MyShops.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/views/MyShops.vue","mtime":1681917298162},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/babel-loader/lib/index.js","mtime":1681917295923},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1681917297993}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IFNob3BCb3ggZnJvbSAiQC9jb21wb25lbnRzL1Nob3BCb3gudnVlIjsgLy8gaW1wb3J0IHsgdG9hc3QgfSBmcm9tICJidWxtYS10b2FzdCI7Ci8vIGltcG9ydCB7IHRpdGxlIH0gZnJvbSAicHJvY2VzcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk15U2hvcHMiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwYWdlX251bTogMSwKICAgICAgc2hvcHM6IFtdLAogICAgICB0eXBlOiAiMSIsCiAgICAgIHRvdGFsX3BhZ2VzOiAwLAogICAgICBlcnJvcnM6IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGRvY3VtZW50LnRpdGxlID0gIuaIkeeahOWVhuW6lyI7CiAgICB0aGlzLnBhZ2VfbnVtID0gMTsgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oImF1dGhvcml6ZSIsIEpTT04uc3RyaW5naWZ5KHsgdXNlcm5hbWU6ICJ3eWxrZXIiLCBpZDogNDcgfSkpOwogICAgLy8gdGhpcy4kc3RvcmUuY29tbWl0KCJpbml0aWFsaXplU3RvcmUiKTsKICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VG9rZW4pOwoKICAgIHRoaXMuZ2V0U2hvcHMoKTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFNob3BCb3g6IFNob3BCb3gKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFNob3BzOiBmdW5jdGlvbiBnZXRTaG9wcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuZXJyb3JzID0gW107CgogICAgICBpZiAodGhpcy5wYWdlX251bSA8PSAwKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgi6aG156CB5LiN5Y+v5bCP5LqOMO+8jOivt+mHjeaWsOi+k+WFpSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGZvcm1EYXRhID0gewogICAgICAgIGF1dGhvcml6ZTogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXV0aG9yaXplIikgfHwgInt9IiksCiAgICAgICAgcGFnZV9udW06IHRoaXMucGFnZV9udW0sCiAgICAgICAgcmV2aWV3OiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhdXRob3JpemUiKSB8fCAie30iKS51c2VybmFtZSA9PSAiYWRtaW4iCiAgICAgIH07CiAgICAgIGF4aW9zLnBvc3QoIi9hcGkvc2hvcC92ZW5kb3IiLCBmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgX3RoaXMuc2hvcHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEuc2hvcHMpKTsKICAgICAgICBfdGhpcy50b3RhbF9wYWdlcyA9IHJlc3BvbnNlLmRhdGEudG90YWxfcGFnZXM7CiAgICAgICAgY29uc29sZS5sb2coX3RoaXMuc2hvcHMpOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIHB1c2hfb3BlbjogZnVuY3Rpb24gcHVzaF9vcGVuKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL29wZW4iKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/views/MyShops.vue"],"names":[],"mappings":"AAmCE,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,OAAP,MAAoB,0BAApB,C,CACA;AACA;;AACA,eAAe;AACb,EAAA,IAAI,EAAE,SADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,QAAQ,EAAE,CADL;AAEL,MAAA,KAAK,EAAE,EAFF;AAGL,MAAA,IAAI,EAAE,GAHD;AAIL,MAAA,WAAW,EAAE,CAJR;AAKL,MAAA,MAAM,EAAE;AALH,KAAP;AAOD,GAVY;AAWb,EAAA,OAXa,qBAWH;AACR,IAAA,QAAQ,CAAC,KAAT,GAAiB,MAAjB;AACA,SAAK,QAAL,GAAgB,CAAhB,CAFQ,CAGR;AACA;AACA;;AACA,SAAK,QAAL;AACD,GAlBY;AAmBb,EAAA,UAAU,EAAE;AACV,IAAA,OAAO,EAAP;AADU,GAnBC;AAsBb,EAAA,OAAO,EAAE;AACP,IAAA,QADO,sBACI;AAAA;;AACT,WAAK,MAAL,GAAc,EAAd;;AACA,UAAI,KAAK,QAAL,IAAiB,CAArB,EAAwB;AACtB,aAAK,MAAL,CAAY,IAAZ,CAAiB,eAAjB;AACA;AACF;;AACA,UAAI,QAAO,GAAI;AACb,QAAA,SAAS,EAAE,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,WAArB,KAAqC,IAAhD,CADE;AAEb,QAAA,QAAQ,EAAE,KAAK,QAFF;AAGb,QAAA,MAAM,EAAE,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,WAArB,KAAqC,IAAhD,EAAsD,QAAtD,IAAkE;AAH7D,OAAf;AAKA,MAAA,KAAI,CACD,IADH,CACQ,kBADR,EAC4B,QAD5B,EAEG,IAFH,CAEQ,UAAC,QAAD,EAAc;AAClB,QAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;AACA,QAAA,KAAI,CAAC,KAAL,GAAa,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,SAAL,CAAe,QAAQ,CAAC,IAAT,CAAc,KAA7B,CAAX,CAAb;AACA,QAAA,KAAI,CAAC,WAAL,GAAmB,QAAQ,CAAC,IAAT,CAAc,WAAjC;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,KAAI,CAAC,KAAjB;AACD,OAPH,WAQS,UAAC,KAAD,EAAW;AAChB,QAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACD,OAVH;AAWD,KAvBM;AAwBP,IAAA,SAxBO,uBAwBK;AACV,WAAK,OAAL,CAAa,IAAb,CAAkB,OAAlB;AACD;AA1BM;AAtBI,CAAf","sourcesContent":["<template>\n  <div class=\"page-shops\">\n    <div class=\"columns\">\n      <div class=\"column is-10\">\n        <h1 class=\"title\">我的商店</h1>\n      </div>\n      <div class=\"column\">\n        <button class=\"button is-link\" @click=\"push_open\">新增店铺</button>\n      </div>\n    </div>\n    <form @submit.prevent=\"getShops\">\n      <div class=\"column is-2\">\n        <div class=\"field\">\n          <label>页码/共{{ total_pages }}页</label>\n          <!-- <div class=\"column is-7\"> -->\n          <div class=\"control\">\n            <input type=\"text\" class=\"input\" v-model=\"page_num\" />\n          </div>\n          <!-- </div> -->\n        </div>\n        <div class=\"field\">\n          <div class=\"control\">\n            <button class=\"button is-dark\">搜索</button>\n          </div>\n        </div>\n      </div>\n    </form>\n    <div class=\"columns is-multiline\">\n      <ShopBox v-for=\"shop in shops\" v-bind:key=\"shop.id\" v-bind:shop=\"shop\" v-bind:type=\"type\" />\n      <!-- 此处type表示此刻是商家在他自己的界面查看自己的商店，为了复用shopbox，故传参数来指明具体使用情况 -->\n    </div>\n  </div>\n</template>\n\n<script>\n  import axios from \"axios\";\n  import ShopBox from \"@/components/ShopBox.vue\";\n  // import { toast } from \"bulma-toast\";\n  // import { title } from \"process\";\n  export default {\n    name: \"MyShops\",\n    data() {\n      return {\n        page_num: 1,\n        shops: [],\n        type: \"1\",\n        total_pages: 0,\n        errors: [],\n      };\n    },\n    mounted() {\n      document.title = \"我的商店\";\n      this.page_num = 1;\n      // localStorage.setItem(\"authorize\", JSON.stringify({ username: \"wylker\", id: 47 }));\n      // this.$store.commit(\"initializeStore\");\n      // console.log(this.$store.getters.getToken);\n      this.getShops();\n    },\n    components: {\n      ShopBox,\n    },\n    methods: {\n      getShops() {\n        this.errors = [];\n        if (this.page_num <= 0) {\n          this.errors.push(\"页码不可小于0，请重新输入\");\n          return;\n        }\n        var formData = {\n          authorize: JSON.parse(localStorage.getItem(\"authorize\") || \"{}\"),\n          page_num: this.page_num,\n          review: JSON.parse(localStorage.getItem(\"authorize\") || \"{}\").username == \"admin\",\n        };\n        axios\n          .post(\"/api/shop/vendor\", formData)\n          .then((response) => {\n            console.log(response);\n            this.shops = JSON.parse(JSON.stringify(response.data.shops));\n            this.total_pages = response.data.total_pages;\n            console.log(this.shops);\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      },\n      push_open() {\n        this.$router.push(\"/open\");\n      },\n    },\n  };\n</script>\n"],"sourceRoot":""}]}