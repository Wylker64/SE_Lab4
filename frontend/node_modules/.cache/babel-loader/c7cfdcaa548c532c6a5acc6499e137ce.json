{"remainingRequest":"/Users/kerunyu/Desktop/寮犳€€鏉句綑鏌鼎pj/fontend/node_modules/babel-loader/lib/index.js!/Users/kerunyu/Desktop/寮犳€€鏉句綑鏌鼎pj/fontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/kerunyu/Desktop/寮犳€€鏉句綑鏌鼎pj/fontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/kerunyu/Desktop/寮犳€€鏉句綑鏌鼎pj/fontend/src/views/LogIn.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/kerunyu/Desktop/寮犳€€鏉句綑鏌鼎pj/fontend/src/views/LogIn.vue","mtime":1672390948000},{"path":"/Users/kerunyu/Desktop/寮犳€€鏉句綑鏌鼎pj/fontend/node_modules/cache-loader/dist/cjs.js","mtime":1671711210000},{"path":"/Users/kerunyu/Desktop/寮犳€€鏉句綑鏌鼎pj/fontend/node_modules/babel-loader/lib/index.js","mtime":1671711214000},{"path":"/Users/kerunyu/Desktop/寮犳€€鏉句綑鏌鼎pj/fontend/node_modules/cache-loader/dist/cjs.js","mtime":1671711210000},{"path":"/Users/kerunyu/Desktop/寮犳€€鏉句綑鏌鼎pj/fontend/node_modules/vue-loader-v16/dist/index.js","mtime":1671711212000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9rZXJ1bnl1L0Rlc2t0b3AvXHU1QkVFXHU3MkIzXHUyMEFDXHUyMEFDXHU5M0M5XHU1M0U1XHU3RDkxXHU5M0NDXHVFMjFCXHU5RjBFcGovZm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdidWxtYS10b2FzdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9nSW4nLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VybmFtZTogJycsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgZXJyb3JzOiBbXQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBkb2N1bWVudC50aXRsZSA9ICdMb2cgSW4nOwogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGZvcm1EYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gPSAiIjsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ0b2tlbiIpOwogICAgICAgICAgICAgICAgZm9ybURhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBfdGhpcy51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IF90aGlzLnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidXJsIikudmFsdWUsIGZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1cmwiKS52YWx1ZTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoJ3NldFRva2VuJywgdG9rZW4pOwoKICAgICAgICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXSA9ICJUb2tlbiAiICsgdG9rZW47CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIsIHRva2VuKTsKCiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MgPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidXJsIikudmFsdWUgPT0gJy9idXllci9sb2dpbicpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciB0b1BhdGggPSBfdGhpcy4kcm91dGUucXVlcnkudG8gfHwgJy9jYXJ0JzsKCiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRCdXllcicsIHRva2VuKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidXJsIikudmFsdWUgPT0gJy9zZWxsZXIvbG9naW4nKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9QYXRoID0gX3RoaXMuJHJvdXRlLnF1ZXJ5LnRvIHx8ICcvYWRkJzsKCiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRTZWxsZXInLCB0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVybCIpLnZhbHVlID09ICcvYWRtaW4vbG9naW4nKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9QYXRoID0gX3RoaXMuJHJvdXRlLnF1ZXJ5LnRvIHx8ICcvcmV2aWV3JzsKCiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRBZG1pbicsIHRva2VuKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh0b1BhdGgpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRvYXN0KHsKICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgICAgICAgICAgICAgIGRpc21pc3NpYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDAsCiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1yaWdodCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVycm9ycy5wdXNoKCIiLmNvbmNhdChwcm9wZXJ0eSwgIjogIikuY29uY2F0KGVycm9yLnJlc3BvbnNlLmRhdGFbcHJvcGVydHldKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIF90aGlzLmVycm9ycy5wdXNoKCdTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2FpbicpOwoKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShlcnJvcikpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/kerunyu/Desktop/寮犳€€鏉句綑鏌鼎pj/fontend/src/views/LogIn.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"page-log-in\">\n        <div class=\"columns\">\n            <div class=\"column is-4 is-offset-4\">\n                <h1 class=\"title\">Log in</h1>\n\n                <form @submit.prevent=\"submitForm\">\n                    <div class = \"field\">\n                    <label>Select your role</label>\n                    <div class = \"control\">\n                        <div class = \"select is-primary\">\n                            <select id=\"url\">\n                                <option value=\"/buyer/login\">Buyer</option>\n                                <option value=\"/seller/login\">Seller</option>\n                                <option value=\"/admin/login\">Administrator</option>\n                            </select>\n                        </div>\n                    </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>Username</label>\n                        <div class=\"control\">\n                            <input type=\"text\" class=\"input\" v-model=\"username\">\n                        </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>Password</label>\n                        <div class=\"control\">\n                            <input type=\"password\" class=\"input\" v-model=\"password\">\n                        </div>\n                    </div>\n\n                    <div class=\"notification is-danger\" v-if=\"errors.length\">\n                        <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                    </div>\n\n                    <div class=\"field\">\n                        <div class=\"control\">\n                            <button class=\"button is-dark\">Log in</button>\n                        </div>\n                    </div>\n\n                    <hr>\n\n                    Or <router-link to=\"/sign-up\">click here</router-link> to sign up!\n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { toast } from 'bulma-toast'\nexport default {\n    name: 'LogIn',\n    data() {\n        return {\n            username: '',\n            password: '',\n            errors: []\n        }\n    },\n    mounted() {\n        document.title = 'Log In'\n    },\n    methods: {\n        async submitForm() {\n            axios.defaults.headers.common[\"Authorization\"] = \"\"\n\n            localStorage.removeItem(\"token\")\n\n            const formData = {\n                username: this.username,\n                password: this.password\n            }\n\n            await axios\n                .post(document.getElementById(\"url\").value, formData)\n                .then(response => {\n                    console.log(response);\n                    const token = document.getElementById(\"url\").value\n\n                    this.$store.commit('setToken', token)\n                    \n                    axios.defaults.headers.common[\"Authorization\"] = \"Token \" + token\n\n                    localStorage.setItem(\"token\", token)\n                    if (response.data.success == true){\n                        if (document.getElementById(\"url\").value == '/buyer/login'){\n                        var toPath = this.$route.query.to || '/cart'\n                        this.$store.commit('setBuyer', token)\n                    }\n                    if (document.getElementById(\"url\").value == '/seller/login'){\n                        var toPath = this.$route.query.to || '/add'\n                        this.$store.commit('setSeller', token)\n                    }                    \n                    if (document.getElementById(\"url\").value == '/admin/login'){\n                        var toPath = this.$route.query.to || '/review'\n                        this.$store.commit('setAdmin', token)\n                    }  \n                    this.$router.push(toPath)\n                } else{\n                            toast({\n                            message: response.data.message,\n                            type: 'warning',\n                            dismissible: true,\n                            pauseOnHover: true,\n                            duration: 2000,\n                            position: 'bottom-right',\n                            \n                        })\n\n                        }\n                })\n                .catch(error => {\n                    if (error.response) {\n                        for (const property in error.response.data) {\n                            this.errors.push(`${property}: ${error.response.data[property]}`)\n                        }\n                    } else {\n                        this.errors.push('Something went wrong. Please try again')\n                        \n                        console.log(JSON.stringify(error))\n                    }\n                })\n        }\n    }\n}\n</script>"],"sourceRoot":""}]}