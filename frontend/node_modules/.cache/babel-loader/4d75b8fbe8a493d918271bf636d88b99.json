{"remainingRequest":"/Users/kerunyu/Desktop/SWE/lab3/frontend/node_modules/babel-loader/lib/index.js!/Users/kerunyu/Desktop/SWE/lab3/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/kerunyu/Desktop/SWE/lab3/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/kerunyu/Desktop/SWE/lab3/frontend/src/views/Review.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/kerunyu/Desktop/SWE/lab3/frontend/src/views/Review.vue","mtime":1680339924386},{"path":"/Users/kerunyu/Desktop/SWE/lab3/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1680339922928},{"path":"/Users/kerunyu/Desktop/SWE/lab3/frontend/node_modules/babel-loader/lib/index.js","mtime":1680339922880},{"path":"/Users/kerunyu/Desktop/SWE/lab3/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1680339922928},{"path":"/Users/kerunyu/Desktop/SWE/lab3/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1680339924277}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9rZXJ1bnl1L0Rlc2t0b3AvU1dFL2xhYjMvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IHRvYXN0IH0gZnJvbSAnYnVsbWEtdG9hc3QnOwppbXBvcnQgU2hvcEJveCBmcm9tICdAL2NvbXBvbmVudHMvU2hvcEJveCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUmV2aWV3JywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvcHM6IFtdLAogICAgICBzaG9wX2lkOiAnJywKICAgICAgYXBwcm92ZWQ6ICcnLAogICAgICBwYWdlX251bTogMSwKICAgICAgZXJyb3JzOiBbXQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFNob3BCb3g6IFNob3BCb3gKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBkb2N1bWVudC50aXRsZSA9ICdSZXZpZXcnOwogICAgdGhpcy5nZXRQcm8oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFBybzogZnVuY3Rpb24gZ2V0UHJvKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZm9ybURhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgnc2V0SXNMb2FkaW5nJywgdHJ1ZSk7CgogICAgICAgICAgICAgICAgZm9ybURhdGEgPSB7CiAgICAgICAgICAgICAgICAgIGF1dGhvcml6ZTogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aG9yaXplJykgfHwgJ3t9JyksCiAgICAgICAgICAgICAgICAgIHBhZ2VfbnVtOiBfdGhpcy5wYWdlX251bSwKICAgICAgICAgICAgICAgICAgcmV2aWV3OiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRob3JpemUnKSB8fCAne30nKS51c2VybmFtZSA9PSAnYWRtaW4nCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgYXhpb3MucG9zdCgnL2FwaS9zaG9wJywgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgX3RoaXMuc2hvcHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEuc2hvcHMpKTsKICAgICAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRJc0xvYWRpbmcnLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZWxlYXNlOiBmdW5jdGlvbiByZWxlYXNlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuZXJyb3JzID0gW107CiAgICAgIHZhciBmb3JtRGF0YSA9IHsKICAgICAgICBhdXRob3JpemU6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhvcml6ZScpIHx8ICd7fScpLAogICAgICAgIHNob3BfaWQ6IHRoaXMuc2hvcF9pZCwKICAgICAgICBhcHByb3ZlZDogdGhpcy5hcHByb3ZlZAogICAgICB9OwogICAgICBheGlvcy5wb3N0KCcvYXBpL3Nob3AvYXBwcm92YWwnLCBmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgdG9hc3QoewogICAgICAgICAgICBtZXNzYWdlOiAn5ZWG5bqX5a6h5qC46YCa6L+H77yBJywKICAgICAgICAgICAgdHlwZTogJ2lzLXN1Y2Nlc3MnLAogICAgICAgICAgICBkaXNtaXNzaWJsZTogdHJ1ZSwKICAgICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgICAgICAgcG9zaXRpb246ICdib3R0b20tcmlnaHQnCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdG9hc3QoewogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5zdGF0dXMsCiAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgICAgZGlzbWlzc2libGU6IHRydWUsCiAgICAgICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSwKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAsCiAgICAgICAgICAgIHBvc2l0aW9uOiAnYm90dG9tLXJpZ2h0JwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgIC8vIGZvciAoY29uc3QgcHJvcGVydHkgaW4gZXJyb3IucmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgLy8gdGhpcy5lcnJvcnMucHVzaChgJHtwcm9wZXJ0eX06ICR7ZXJyb3IucmVzcG9uc2UuZGF0YVtwcm9wZXJ0eV19YCkKICAgICAgICAgIF90aGlzMi5lcnJvcnMucHVzaChlcnJvci5yZXNwb25zZS5kYXRhKTsgLy8gfQoKCiAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShlcnJvci5yZXNwb25zZSkpOwogICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgX3RoaXMyLmVycm9ycy5wdXNoKCdTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2FpbicpOwoKICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGVycm9yLnJlc3BvbnNlKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/kerunyu/Desktop/SWE/lab3/frontend/src/views/Review.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"home\">\n      <div class=\"columns\">\n      <div class=\"column\">\n      <form @submit.prevent=\"getPro\">\n            <div class=\"column is-4 is-offset-4\">          \n            <div class=\"field\">\n                <label>页面</label>\n                <div class=\"control\">\n                    <input type=\"text\" class=\"input\" v-model=\"page_num\">\n                </div>\n            </div>\n            <div class=\"field\">\n                <div class=\"control\">\n                    <button class=\"button is-dark\" @click=\"getPro\">搜索！</button>\n                </div>\n            </div>\n        </div> \n        </form>\n      </div>\n      <div class=\"column\">\n      <form @submit.prevent=\"release\">\n            <div class=\"column is-4 is-offset-4\">          \n            <div class=\"field\">\n                <label>Shop ID</label>\n                <div class=\"control\">\n                    <input type=\"text\" class=\"input\" v-model=\"shop_id\">\n                </div>\n            </div>\n            <div class=\"field\">\n                <div class=\"control\">\n                    <button :style=\"{ marginRight: '10px' }\" @click=\"approved = true\">批准开店！</button>\n                    <button @click=\"approved = false\">拒绝请求</button>\n                </div>\n            </div>\n            <div class=\"notification is-danger\" v-if=\"errors.length\">\n                        <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n            </div>\n\n        </div> \n        </form>\n      </div>\n      </div>\n      <div class=\"columns is-multiline\">\n        <ShopBox \n          v-for=\"shop in shops\"\n          v-bind:key=\"shop.id\"\n          v-bind:shop=\"shop\" />\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import axios from 'axios'\n  import { toast } from 'bulma-toast'\n  import ShopBox from '@/components/ShopBox'\n  export default {\n    name: 'Review',\n    data() {\n        return {\n            shops: [],\n            shop_id: '',\n            approved: '',\n            page_num: 1,\n            errors: [],\n        }\n    },\n    components: {\n      ShopBox\n    },\n    mounted() {\n      document.title = 'Review'\n      this.getPro() \n    },\n  methods: {\n    async getPro() {\n      this.$store.commit('setIsLoading', true)\n      var formData =  {\n          authorize: JSON.parse(localStorage.getItem('authorize') || '{}'),\n          page_num: this.page_num, \n          review: JSON.parse(localStorage.getItem('authorize') || '{}').username == 'admin'\n      }\n      axios\n          .post('/api/shop', formData)\n          .then(response => {\n              console.log(response)\n                this.shops = JSON.parse(JSON.stringify((response.data.shops)))\n          })\n        .catch(error => {\n          console.log(error)\n        })\n\n      this.$store.commit('setIsLoading', false)\n        },\n      release() {\n          this.errors=[]\n          var formData =  {\n              authorize: JSON.parse(localStorage.getItem('authorize') || '{}'),\n              shop_id: this.shop_id,\n              approved: this.approved,\n          }\n          axios\n                      .post('/api/shop/approval', formData)\n                      .then(response => {\n                          if (response.status == 200){\n                              \n                              toast({\n                              message: '商店审核通过！',\n                              type: 'is-success',\n                              dismissible: true,\n                              pauseOnHover: true,\n                              duration: 2000,\n                              position: 'bottom-right',\n                              \n                          })\n                          } else{\n                              toast({\n                              message: response.status,\n                              type: 'warning',\n                              dismissible: true,\n                              pauseOnHover: true,\n                              duration: 2000,\n                              position: 'bottom-right',\n                              \n                          })\n\n                          }\n                      })\n                      .catch(error => {\n                          if (error.response) {\n                              // for (const property in error.response.data) {\n                                // this.errors.push(`${property}: ${error.response.data[property]}`)\n                                this.errors.push(error.response.data)\n                              // }\n\n                              console.log(JSON.stringify(error.response))\n                          } else if (error.message) {\n                              this.errors.push('Something went wrong. Please try again')\n                              console.log(JSON.stringify(error.response))\n                          }\n                      })\n\n          },\n    }\n  }\n  </script>\n"],"sourceRoot":""}]}