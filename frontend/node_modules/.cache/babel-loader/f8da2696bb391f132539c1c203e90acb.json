{"remainingRequest":"/Users/kerunyu/Desktop/frontend/node_modules/babel-loader/lib/index.js!/Users/kerunyu/Desktop/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/kerunyu/Desktop/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/kerunyu/Desktop/frontend/src/views/SignUp.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/kerunyu/Desktop/frontend/src/views/SignUp.vue","mtime":1679157389965},{"path":"/Users/kerunyu/Desktop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1671711210000},{"path":"/Users/kerunyu/Desktop/frontend/node_modules/babel-loader/lib/index.js","mtime":1671711214000},{"path":"/Users/kerunyu/Desktop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1671711210000},{"path":"/Users/kerunyu/Desktop/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1671711212000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdidWxtYS10b2FzdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2lnblVwJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcm5hbWU6ICcnLAogICAgICBwaG9uZV9udW1iZXI6ICcnLAogICAgICBpZF9jYXJkOiAnJywKICAgICAgZW1haWw6ICcnLAogICAgICBwYXNzd29yZDogJycsCiAgICAgIHBhc3N3b3JkMjogJycsCiAgICAgIGVycm9yczogW10KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgZG9jdW1lbnQudGl0bGUgPSAnU2lnbiBVcCc7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5lcnJvcnMgPSBbXTsKCiAgICAgIGlmICgvXlthLXpBLVowLTlfXXszLDEwfSQvLnRlc3QodGhpcy51c2VybmFtZSkpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCfnlKjmiLflkI3moLzlvI/kuI3mraPnoa4o6Iux5paH44CB5pWw5a2X44CB5LiL5YiS57q/77yM6ZW/5bqm5Li6My0xMOS4quWtl+espiknKTsKICAgICAgfQoKICAgICAgaWYgKC9eMVszLTldXGR7OX0kLy50ZXN0KHRoaXMucGhvbmVfbnVtYmVyKSkgewogICAgICAgIGNvbnNvbGUubG9nKCk7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgn6K+36L6T5YWl5Lit5Zu95aSn6ZmG55qE5omL5py65Y+3KDEx5L2N77yM56ys5LiA5L2N5Li6Me+8jOesrOS6jOS9jeS4ujMtOeWFtuS4reS5i+S4gCknKTsKICAgICAgfQoKICAgICAgaWYgKC9eXGR7MTh9JC8udGVzdCh0aGlzLmlkX2NhcmQpKSB7CiAgICAgICAgY29uc29sZS5sb2coKTsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCfor7fovpPlhaXmraPnoa7nmoTkuK3lm73ouqvku73or4Hlj7fvvIzkuIDlhbExOOS9jScpOwogICAgICB9CgogICAgICBpZiAoL15bXlxzQF0rQFteXHNAXStcLlteXHNAXSskLy50ZXN0KHRoaXMuZW1haWwpKSB7CiAgICAgICAgY29uc29sZS5sb2coKTsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCfor7fovpPlhaXmraPnoa7nmoRFLW1haWwo55So5oi35ZCNK0Ar5Z+f5ZCNKScpOwogICAgICB9CgogICAgICBpZiAoL14oPz0uKlthLXpBLVpdKSg/PS4qXGQpfCg/PS4qXGQpKD89LipbLV9dKXwoPz0uKlthLXpBLVpdKSg/PS4qWy1fXSlbYS16QS1aXGQtX117NiwzMn0kLy50ZXN0KHRoaXMuZW1haWwpKSB7CiAgICAgICAgY29uc29sZS5sb2coKTsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCfor7fovpPlhaXmu6HotrPopoHmsYLnmoTlr4bnoIEoNi0zMuS4quWtl+espu+8jOiHs+WwkeWMheWQq+Wtl+avjeOAgeaVsOWtl+aIluiAhe+8iC1f77yJ5Lit55qE6Iez5bCR5Lik56eNKScpOwogICAgICB9CgogICAgICBpZiAodGhpcy5wYXNzd29yZCAhPT0gdGhpcy5wYXNzd29yZDIpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCfkuKTmrKHovpPlhaXnmoTlr4bnoIHkuI3kuIDmoLcnKTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLmVycm9ycy5sZW5ndGgpIHsKICAgICAgICB2YXIgZm9ybURhdGEgPSB7CiAgICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLAogICAgICAgICAgcGhvbmVfbnVtYmVyOiB0aGlzLnBob25lX251bWJlciwKICAgICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgICAgaWRfY2FyZDogdGhpcy5pZF9jYXJkLAogICAgICAgICAgaWRlbnRpdHk6IGRvY3VtZW50LmdldEVsZW1lbnRCeWlkX2NhcmQoImlkZW50aXR5IikudmFsdWUKICAgICAgICB9OwogICAgICAgIGF4aW9zLnBvc3QoJ3JlZ2lzdGVyJywgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzID09IHRydWUpIHsKICAgICAgICAgICAgdG9hc3QoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICfotKblj7fmiJDlip/ms6jlhozvvIzlj6/ku6XnmbvpmYbkuobvvIEnLAogICAgICAgICAgICAgIHR5cGU6ICdpcy1zdWNjZXNzJywKICAgICAgICAgICAgICBkaXNtaXNzaWJsZTogdHJ1ZSwKICAgICAgICAgICAgICBwYXVzZU9uSG92ZXI6IHRydWUsCiAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDAsCiAgICAgICAgICAgICAgcG9zaXRpb246ICdib3R0b20tcmlnaHQnCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvcmVnaXN0ZXInKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRvYXN0KHsKICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UsCiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgICAgIGRpc21pc3NpYmxlOiB0cnVlLAogICAgICAgICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSwKICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1yaWdodCcKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gZXJyb3IucmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgIF90aGlzLmVycm9ycy5wdXNoKCIiLmNvbmNhdChwcm9wZXJ0eSwgIjogIikuY29uY2F0KGVycm9yLnJlc3BvbnNlLmRhdGFbcHJvcGVydHldKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGVycm9yLnJlc3BvbnNlLmRhdGEpKTsKICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgICBfdGhpcy5lcnJvcnMucHVzaChlcnJvci5tZXNzYWdlKTsKCiAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGVycm9yKSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/kerunyu/Desktop/frontend/src/views/SignUp.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"page-sign-up\">\n        <div class=\"columns\">\n            <div class=\"column is-4 is-offset-4\">\n                <h1 class=\"title\">注册</h1>\n\n                <form @submit.prevent=\"submitForm\">\n                    <div class = \"field\">\n                    <label>选择你的角色</label>\n                    <div class = \"control\">\n                        <div class = \"select is-primary\">\n                            <select id_card=\"identity\">\n                                <option value=\"buyer\">买家</option>\n                                <option value=\"seller\" >卖家</option>\n                            </select>\n                        </div>\n                    </div>\n                    </div>\n\n\n                    <div class=\"field\">\n                        <label>用户名</label>\n                        <div class=\"control\">\n                            <input type=\"text\" class=\"input\" v-model=\"username\">\n                        </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>手机号</label>\n                        <div class=\"control\">\n                            <input type=\"text\" class=\"input\" v-model=\"phone_number\">\n                        </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>身份证号</label>\n                        <div class=\"control\">\n                            <input type=\"text\" class=\"input\" v-model=\"id_card\">\n                        </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>邮箱</label>\n                        <div class=\"control\">\n                            <input type=\"text\" class=\"input\" v-model=\"email\">\n                        </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>密码</label>\n                        <div class=\"control\">\n                            <input type=\"password\" class=\"input\" v-model=\"password\">\n                        </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>重复输入密码</label>\n                        <div class=\"control\">\n                            <input type=\"password\" class=\"input\" v-model=\"password2\">\n                        </div>\n                    </div>\n\n                    <div class=\"notification is-danger\" v-if=\"errors.length\">\n                        <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                    </div>\n\n                    <div class=\"field\">\n                        <div class=\"control\">\n                            <button class=\"button is-dark\">Sign up</button>\n                        </div>\n                    </div>\n\n                    <hr>\n\n                    Or <router-link to=\"/log-in\">点击这里</router-link> 注册!\n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { toast } from 'bulma-toast'\nexport default {\n    name: 'SignUp',\n    data() {\n        return {\n            username: '',\n            phone_number: '',\n            id_card: '',\n            email: '',\n            password: '',\n            password2: '',\n            errors: []\n        }\n    },\n    mounted() {\n        document.title = 'Sign Up';\n\n    },\n    methods: {\n        submitForm() {\n            this.errors = []\n            if (/^[a-zA-Z0-9_]{3,10}$/.test(this.username)) {\n                this.errors.push('用户名格式不正确(英文、数字、下划线，长度为3-10个字符)')\n            }\n\n            if (/^1[3-9]\\d{9}$/.test(this.phone_number)) {\n                console.log()\n                this.errors.push('请输入中国大陆的手机号(11位，第一位为1，第二位为3-9其中之一)')\n            }\n\n            if (/^\\d{18}$/.test(this.id_card)) {\n                console.log()\n                this.errors.push('请输入正确的中国身份证号，一共18位')\n            }\n\n            if (/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(this.email)) {\n                console.log()\n                this.errors.push('请输入正确的E-mail(用户名+@+域名)')\n            }\n\n   \n            if (/^(?=.*[a-zA-Z])(?=.*\\d)|(?=.*\\d)(?=.*[-_])|(?=.*[a-zA-Z])(?=.*[-_])[a-zA-Z\\d-_]{6,32}$/.test(this.email)) {\n                console.log()\n                this.errors.push('请输入满足要求的密码(6-32个字符，至少包含字母、数字或者（-_）中的至少两种)')\n            }\n\n\n            if (this.password !== this.password2) {\n                this.errors.push('两次输入的密码不一样')\n            }\n\n\n            if (!this.errors.length) {\n                    var formData =  {\n                    username: this.username,\n                    password: this.password,\n                    phone_number: this.phone_number,\n                    email: this.email,\n                    id_card: this.id_card,\n                    identity: document.getElementByid_card(\"identity\").value,\n                }\n\n\n                axios\n                    .post('register', formData)\n                    .then(response => {\n                        if (response.data.success == true){\n                            toast({\n                            message: '账号成功注册，可以登陆了！',\n                            type: 'is-success',\n                            dismissible: true,\n                            pauseOnHover: true,\n                            duration: 2000,\n                            position: 'bottom-right',\n                            \n                        })\n                        this.$router.push('/register')\n                        } else{\n                            toast({\n                            message: response.data.message,\n                            type: 'warning',\n                            dismissible: true,\n                            pauseOnHover: true,\n                            duration: 2000,\n                            position: 'bottom-right',\n                            \n                        })\n\n                        }\n                    })\n                    .catch(error => {\n                        if (error.response) {\n                            for (const property in error.response.data) {\n                                this.errors.push(`${property}: ${error.response.data[property]}`)\n                            }\n\n                            console.log(JSON.stringify(error.response.data))\n                        } else if (error.message) {\n                            \n                            this.errors.push(error.message)\n                            \n                            console.log(JSON.stringify(error))\n                        }\n                    })\n            }\n        }\n    }\n}\n</script>"],"sourceRoot":""}]}