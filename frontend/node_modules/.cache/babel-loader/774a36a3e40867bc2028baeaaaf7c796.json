{"remainingRequest":"/Users/kerunyu/Desktop/frontend/node_modules/babel-loader/lib/index.js!/Users/kerunyu/Desktop/frontend/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/kerunyu/Desktop/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/kerunyu/Desktop/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/kerunyu/Desktop/frontend/src/views/LogIn.vue?vue&type=template&id=933e7582","dependencies":[{"path":"/Users/kerunyu/Desktop/frontend/src/views/LogIn.vue","mtime":1679157388738},{"path":"/Users/kerunyu/Desktop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1671711210000},{"path":"/Users/kerunyu/Desktop/frontend/node_modules/babel-loader/lib/index.js","mtime":1671711214000},{"path":"/Users/kerunyu/Desktop/frontend/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1671711212000},{"path":"/Users/kerunyu/Desktop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1671711210000},{"path":"/Users/kerunyu/Desktop/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1671711212000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB2TW9kZWxUZXh0IGFzIF92TW9kZWxUZXh0LCB3aXRoRGlyZWN0aXZlcyBhcyBfd2l0aERpcmVjdGl2ZXMsIHJlbmRlckxpc3QgYXMgX3JlbmRlckxpc3QsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcsIGNyZWF0ZUNvbW1lbnRWTm9kZSBhcyBfY3JlYXRlQ29tbWVudFZOb2RlLCBjcmVhdGVUZXh0Vk5vZGUgYXMgX2NyZWF0ZVRleHRWTm9kZSwgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgd2l0aEN0eCBhcyBfd2l0aEN0eCwgd2l0aE1vZGlmaWVycyBhcyBfd2l0aE1vZGlmaWVycyB9IGZyb20gInZ1ZSI7CnZhciBfaG9pc3RlZF8xID0gewogICJjbGFzcyI6ICJwYWdlLWxvZy1pbiIKfTsKdmFyIF9ob2lzdGVkXzIgPSB7CiAgImNsYXNzIjogImNvbHVtbnMiCn07CnZhciBfaG9pc3RlZF8zID0gewogICJjbGFzcyI6ICJjb2x1bW4gaXMtNCBpcy1vZmZzZXQtNCIKfTsKCnZhciBfaG9pc3RlZF80ID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiaDEiLCB7CiAgImNsYXNzIjogInRpdGxlIgp9LCAi55m76ZmGIiwgLTEKLyogSE9JU1RFRCAqLwopOwoKdmFyIF9ob2lzdGVkXzUgPSB7CiAgImNsYXNzIjogImZpZWxkIgp9OwoKdmFyIF9ob2lzdGVkXzYgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJsYWJlbCIsIG51bGwsICLnlKjmiLflkI0iLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfNyA9IHsKICAiY2xhc3MiOiAiY29udHJvbCIKfTsKdmFyIF9ob2lzdGVkXzggPSB7CiAgImNsYXNzIjogImZpZWxkIgp9OwoKdmFyIF9ob2lzdGVkXzkgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJsYWJlbCIsIG51bGwsICLlr4bnoIEiLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfMTAgPSB7CiAgImNsYXNzIjogImNvbnRyb2wiCn07CnZhciBfaG9pc3RlZF8xMSA9IHsKICBrZXk6IDAsCiAgImNsYXNzIjogIm5vdGlmaWNhdGlvbiBpcy1kYW5nZXIiCn07Cgp2YXIgX2hvaXN0ZWRfMTIgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgImNsYXNzIjogImZpZWxkIgp9LCBbLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiZGl2IiwgewogICJjbGFzcyI6ICJjb250cm9sIgp9LCBbLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiYnV0dG9uIiwgewogICJjbGFzcyI6ICJidXR0b24gaXMtZGFyayIKfSwgIueZu+mZhiIpXSldLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfMTMgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJociIsIG51bGwsIG51bGwsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF8xNCA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCIgT3IgIik7Cgp2YXIgX2hvaXN0ZWRfMTUgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVRleHRWTm9kZSgi54K55Ye76L+Z6YeMIik7Cgp2YXIgX2hvaXN0ZWRfMTYgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVRleHRWTm9kZSgiIOWOu+azqOWGjCEgIik7CgpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHZhciBfY29tcG9uZW50X3JvdXRlcl9saW5rID0gX3Jlc29sdmVDb21wb25lbnQoInJvdXRlci1saW5rIik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMywgW19ob2lzdGVkXzQsIF9jcmVhdGVWTm9kZSgiZm9ybSIsIHsKICAgIG9uU3VibWl0OiBfY2FjaGVbM10gfHwgKF9jYWNoZVszXSA9IF93aXRoTW9kaWZpZXJzKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICRvcHRpb25zLnN1Ym1pdEZvcm0gJiYgJG9wdGlvbnMuc3VibWl0Rm9ybS5hcHBseSgkb3B0aW9ucywgYXJndW1lbnRzKTsKICAgIH0sIFsicHJldmVudCJdKSkKICB9LCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF81LCBbX2hvaXN0ZWRfNiwgX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF83LCBbX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZSgiaW5wdXQiLCB7CiAgICB0eXBlOiAidGV4dCIsCiAgICAiY2xhc3MiOiAiaW5wdXQiLAogICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRkYXRhLnVzZXJuYW1lID0gJGV2ZW50OwogICAgfSkKICB9LCBudWxsLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKSwgW1tfdk1vZGVsVGV4dCwgJGRhdGEudXNlcm5hbWVdXSldKV0pLCBfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzgsIFtfaG9pc3RlZF85LCBfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzEwLCBbX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZSgiaW5wdXQiLCB7CiAgICB0eXBlOiAicGFzc3dvcmQiLAogICAgImNsYXNzIjogImlucHV0IiwKICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiAkZGF0YS5wYXNzd29yZCA9ICRldmVudDsKICAgIH0pCiAgfSwgbnVsbCwgNTEyCiAgLyogTkVFRF9QQVRDSCAqLwogICksIFtbX3ZNb2RlbFRleHQsICRkYXRhLnBhc3N3b3JkXV0pXSldKSwgJGRhdGEuZXJyb3JzLmxlbmd0aCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMTEsIFsoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoJGRhdGEuZXJyb3JzLCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygicCIsIHsKICAgICAga2V5OiBlcnJvcgogICAgfSwgX3RvRGlzcGxheVN0cmluZyhlcnJvciksIDEKICAgIC8qIFRFWFQgKi8KICAgICk7CiAgfSksIDEyOAogIC8qIEtFWUVEX0ZSQUdNRU5UICovCiAgKSldKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCJ2LWlmIiwgdHJ1ZSksIF9ob2lzdGVkXzEyLCBfaG9pc3RlZF8xMywgX2hvaXN0ZWRfMTQsIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X3JvdXRlcl9saW5rLCB7CiAgICB0bzogIi9zaWduLXVwIgogIH0sIHsKICAgICJkZWZhdWx0IjogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gW19ob2lzdGVkXzE1XTsKICAgIH0pLAogICAgXzogMQogICAgLyogU1RBQkxFICovCgogIH0pLCBfaG9pc3RlZF8xNl0sIDMyCiAgLyogSFlEUkFURV9FVkVOVFMgKi8KICApXSldKV0pOwp9"},{"version":3,"sources":["/Users/kerunyu/Desktop/frontend/src/views/LogIn.vue"],"names":[],"mappings":";;AACS,WAAM;;;AACF,WAAM;;;AACF,WAAM;;;8BACP,YAAA,CAAyB,IAAzB,EAAyB;AAArB,WAAM;AAAe,CAAzB,EAAkB,IAAlB,EAAoB,CAAA;AAAA;AAApB,C;;;AAIS,WAAM;;;8BACP,YAAA,CAAkB,OAAlB,EAAkB,IAAlB,EAAO,KAAP,EAAU,CAAA;AAAA;AAAV,C;;;AACK,WAAM;;;AAKV,WAAM;;;8BACP,YAAA,CAAiB,OAAjB,EAAiB,IAAjB,EAAO,IAAP,EAAS,CAAA;AAAA;AAAT,C;;;AACK,WAAM;;;;AAKV,WAAM;;;+BAIX,YAAA,CAIM,KAJN,EAIM;AAJD,WAAM;AAIL,CAJN,EAAkB,C,aACd,YAAA,CAEM,KAFN,EAEM;AAFD,WAAM;AAEL,CAFN,EAAoB,C,aAChB,YAAA,CAA0C,QAA1C,EAA0C;AAAlC,WAAM;AAA4B,CAA1C,EAA+B,IAA/B,CADgB,CAApB,CADc,CAAlB,E;;AAAA,C;;+BAMA,YAAA,CAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI,CAAA;AAAA;AAAJ,C;;gDAAI,M;;gDAE0B,M;;gDAAkB,Q;;;;;uBAjChE,YAAA,CAqCM,KArCN,EAAA,UAAA,EAqCM,CApCF,YAAA,CAmCM,KAnCN,EAAA,UAAA,EAmCM,CAlCF,YAAA,CAiCM,KAjCN,EAAA,UAAA,EAiCM,CAhCF,UAgCE,EA9BF,YAAA,CA6BO,MA7BP,EA6BO;AA7BA,IAAA,QAAM,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,cAAA,CAAA;AAAA,aAAU,QAAA,CAAA,UAAA,IAAA,QAAA,CAAA,UAAA,OAAA,QAAA,YAAV;AAAA,KAAA,EAAoB,CAAA,SAAA,CAApB,CAAA;AA6BN,GA7BP,E,CAEI,YAAA,CAKM,KALN,EAAA,UAAA,EAKM,CAJF,UAIE,EAHF,YAAA,CAEM,KAFN,EAAA,UAAA,EAEM,C,gBADF,YAAA,CAAoD,OAApD,EAAoD;AAA7C,IAAA,IAAI,EAAC,MAAwC;AAAjC,aAAM,OAA2B;;aAAV,KAAA,CAAA,QAAA,GAAQ,M;;AAAE,GAApD,E,IAAA,E;;AAAA,G,iBAA0C,KAAA,CAAA,Q,GACxC,CAFN,CAGE,CALN,C,EAOA,YAAA,CAKM,KALN,EAAA,UAAA,EAKM,CAJF,UAIE,EAHF,YAAA,CAEM,KAFN,EAAA,WAAA,EAEM,C,gBADF,YAAA,CAAwD,OAAxD,EAAwD;AAAjD,IAAA,IAAI,EAAC,UAA4C;AAAjC,aAAM,OAA2B;;aAAV,KAAA,CAAA,QAAA,GAAQ,M;;AAAE,GAAxD,E,IAAA,E;;AAAA,G,iBAA8C,KAAA,CAAA,Q,GAC5C,CAFN,CAGE,CALN,C,EAO0C,KAAA,CAAA,MAAA,CAAO,M,kBAAjD,YAAA,CAEM,KAFN,EAAA,WAAA,EAEM,E,kBADF,YAAA,CAA6D,SAA7D,EAA6D,IAA7D,EAA6D,WAAA,CAA1C,KAAA,CAAA,MAA0C,EAApC,UAAf,KAAe,EAAV;yBAAf,YAAA,CAA6D,GAA7D,EAA6D;AAA3B,MAAA,GAAG,EAAE;AAAsB,KAA7D,EAA4C,gBAAA,CAAK,KAAL,CAA5C,EAAsD;AAAA;AAAtD,K;GAA6D,CAA7D,E;;AAAA,GACE,EAFN,C,uCAIA,W,EAMA,W,eAEG,YAAA,CAA6C,sBAA7C,EAA6C;AAAhC,IAAA,EAAE,EAAC;AAA6B,GAA7C,EAA0B;wBAAC;AAAA,aAAI,C,WAAA,CAAJ;AAAA,K,CAAD;;;;AAAA,GAA1B,C,cA5BP,E;;AAAA,GA8BE,CAjCN,CAkCE,CAnCN,CAoCE,CArCN,C","sourcesContent":["<template>\n    <div class=\"page-log-in\">\n        <div class=\"columns\">\n            <div class=\"column is-4 is-offset-4\">\n                <h1 class=\"title\">登陆</h1>\n\n                <form @submit.prevent=\"submitForm\">\n\n                    <div class=\"field\">\n                        <label>用户名</label>\n                        <div class=\"control\">\n                            <input type=\"text\" class=\"input\" v-model=\"username\">\n                        </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>密码</label>\n                        <div class=\"control\">\n                            <input type=\"password\" class=\"input\" v-model=\"password\">\n                        </div>\n                    </div>\n\n                    <div class=\"notification is-danger\" v-if=\"errors.length\">\n                        <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                    </div>\n\n                    <div class=\"field\">\n                        <div class=\"control\">\n                            <button class=\"button is-dark\">登陆</button>\n                        </div>\n                    </div>\n\n                    <hr>\n\n                    Or <router-link to=\"/sign-up\">点击这里</router-link> 去注册!\n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { toast } from 'bulma-toast'\nexport default {\n    name: 'LogIn',\n    data() {\n        return {\n            username: '',\n            password: '',\n            errors: [],\n            userid: '',\n            identity: ''\n        }\n    },\n    mounted() {\n        document.title = '登陆'\n    },\n    methods: {\n        async submitForm() {\n            axios.defaults.headers.common[\"Authorization\"] = \"\"\n\n            localStorage.removeItem(\"token\")\n\n            const formData = {\n                username: this.username,\n                password: this.password\n            }\n\n            await axios\n                .post('/login', formData)\n                .then(response => {\n                    this.userid = response.data.userid;\n                    this.identity = response.data.identity;\n                    console.log(response);\n                    \n                    localStorage.setItem('authorize', JSON.stringify({username: this.username, userid: this.userid,}));\n                    // const token = document.getElementById(\"url\").value\n\n                    // this.$store.commit('setToken', token)\n                    \n                    // axios.defaults.headers.common[\"Authorization\"] = \"Token \" + token\n\n                    // localStorage.setItem(\"token\", token)\n                    if (response.data.success == true){\n                        if (this.identity == ''){\n                        var toPath = this.$route.query.to || '/home'\n                        // this.$store.commit('setBuyer', token)\n                    }\n                    if (this.identity == ''){\n                        var toPath = this.$route.query.to || '/warehouse'\n                        // this.$store.commit('setSeller', token)\n                    }                    \n                    if (this.identity == ''){\n                        var toPath = this.$route.query.to || '/review'\n                        // this.$store.commit('setAdmin', token)\n                    }  \n                    this.$router.push(toPath)\n                } else{\n                            toast({\n                            message: response.data.message,\n                            type: 'warning',\n                            dismissible: true,\n                            pauseOnHover: true,\n                            duration: 2000,\n                            position: 'bottom-right',\n                            \n                        })\n\n                        }\n                })\n                .catch(error => {\n                    if (error.response) {\n                        for (const property in error.response.data) {\n                            this.errors.push(`${property}: ${error.response.data[property]}`)\n                        }\n                    } else {\n                        this.errors.push('Something went wrong. Please try again')\n                        \n                        console.log(JSON.stringify(error))\n                    }\n                })\n        }\n    }\n}\n</script>"],"sourceRoot":""}]}