{"remainingRequest":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/babel-loader/lib/index.js!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/views/Recharge.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/views/Recharge.vue","mtime":1684501455031},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/babel-loader/lib/index.js","mtime":1681917295923},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1681917297993}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgdG9hc3QgfSBmcm9tICJidWxtYS10b2FzdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmVjaGFyZ2UiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhZGRlZDogMCwKICAgICAgYWNjb3VudDoge30KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgZG9jdW1lbnQudGl0bGUgPSAi55So5oi35YWF5YC8IjsKICAgIHRoaXMuZ2V0QmFsYW5jZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgcHVzaF9mdW5kc2Zsb3c6IGZ1bmN0aW9uIHB1c2hfZnVuZHNmbG93KCkgewogICAgICB2YXIgdXJsID0gIi9mdW5kcy1mbG93LyIgKyB0aGlzLmlkOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogdXJsCiAgICAgIH0pOwogICAgfSwKICAgIC8v6I635Y+W5L2Z6aKdCiAgICBnZXRCYWxhbmNlOiBmdW5jdGlvbiBnZXRCYWxhbmNlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGZvcm1EYXRhID0gewogICAgICAgIGF1dGhvcml6ZTogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXV0aG9yaXplIikgfHwgInt9IikKICAgICAgfTsKICAgICAgYXhpb3MucG9zdCgiL2FwaS9hY2NvdW50IiwgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMuYWNjb3VudCA9IHJlc3BvbnNlLmRhdGEuYWNjb3VudDsKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWNjb3VudCk7CiAgICB9LAogICAgLy/mj5DkuqTmlrDlop7ph5Hpop0KICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGZvcm1EYXRhID0gewogICAgICAgIGF1dGhvcml6ZTogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXV0aG9yaXplIikgfHwgInt9IiksCiAgICAgICAgYWNjb3VudF9pZDogdGhpcy5hY2NvdW50LmlkLAogICAgICAgIGFtb3VudDogdGhpcy5hZGRlZAogICAgICB9OwogICAgICBheGlvcy5wb3N0KCIvYXBpL2FjY291bnQvY2hhcmdlIiwgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEpOwoKICAgICAgICBfdGhpczIuZ2V0QmFsYW5jZSgpOwoKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgdG9hc3QoewogICAgICAgICAgICBtZXNzYWdlOiAi5YWF5YC85oiQ5Yqf77yBIiwKICAgICAgICAgICAgdHlwZTogImlzLXN1Y2Nlc3MiLAogICAgICAgICAgICBkaXNtaXNzaWJsZTogdHJ1ZSwKICAgICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgICAgICAgcG9zaXRpb246ICJib3R0b20tcmlnaHQiCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdG9hc3QoewogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UsCiAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgZGlzbWlzc2libGU6IHRydWUsCiAgICAgICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSwKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAsCiAgICAgICAgICAgIHBvc2l0aW9uOiAiYm90dG9tLXJpZ2h0IgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/views/Recharge.vue"],"names":[],"mappings":"AAgCE,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,KAAT,QAAsB,aAAtB;AACA,eAAe;AACb,EAAA,IAAI,EAAE,UADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,KAAK,EAAE,CADF;AAEL,MAAA,OAAO,EAAE;AAFJ,KAAP;AAID,GAPY;AAQb,EAAA,OARa,qBAQH;AACR,IAAA,QAAQ,CAAC,KAAT,GAAiB,MAAjB;AACA,SAAK,UAAL;AACD,GAXY;AAYb,EAAA,OAAO,EAAE;AACP,IAAA,cADO,4BACU;AACf,UAAI,GAAE,GAAI,iBAAiB,KAAK,EAAhC;AACA,WAAK,OAAL,CAAa,IAAb,CAAkB;AAAE,QAAA,IAAI,EAAE;AAAR,OAAlB;AACD,KAJM;AAKP;AACA,IAAA,UANO,wBAMM;AAAA;;AACX,UAAI,QAAO,GAAI;AACb,QAAA,SAAS,EAAE,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,WAArB,KAAqC,IAAhD;AADE,OAAf;AAGA,MAAA,KAAK,CAAC,IAAN,CAAW,cAAX,EAA2B,QAA3B,EAAqC,IAArC,CAA0C,UAAC,QAAD,EAAc;AACtD,QAAA,KAAI,CAAC,OAAL,GAAe,QAAQ,CAAC,IAAT,CAAc,OAA7B;AACD,OAFD;AAGA,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,OAAjB;AACD,KAdM;AAeP;AACA,IAAA,UAhBO,wBAgBM;AAAA;;AACX,UAAI,QAAO,GAAI;AACb,QAAA,SAAS,EAAE,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,WAArB,KAAqC,IAAhD,CADE;AAEb,QAAA,UAAU,EAAE,KAAK,OAAL,CAAa,EAFZ;AAGb,QAAA,MAAM,EAAE,KAAK;AAHA,OAAf;AAKA,MAAA,KAAI,CACD,IADH,CACQ,qBADR,EAC+B,QAD/B,EAEG,IAFH,CAEQ,UAAC,QAAD,EAAc;AAClB,QAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;;AACA,QAAA,MAAI,CAAC,UAAL;;AACA,YAAI,QAAQ,CAAC,MAAT,IAAmB,GAAvB,EAA4B;AAC1B,UAAA,KAAK,CAAC;AACJ,YAAA,OAAO,EAAE,OADL;AAEJ,YAAA,IAAI,EAAE,YAFF;AAGJ,YAAA,WAAW,EAAE,IAHT;AAIJ,YAAA,YAAY,EAAE,IAJV;AAKJ,YAAA,QAAQ,EAAE,IALN;AAMJ,YAAA,QAAQ,EAAE;AANN,WAAD,CAAL;AAQF,SATA,MASO;AACL,UAAA,KAAK,CAAC;AACJ,YAAA,OAAO,EAAE,QAAQ,CAAC,IAAT,CAAc,OADnB;AAEJ,YAAA,IAAI,EAAE,SAFF;AAGJ,YAAA,WAAW,EAAE,IAHT;AAIJ,YAAA,YAAY,EAAE,IAJV;AAKJ,YAAA,QAAQ,EAAE,IALN;AAMJ,YAAA,QAAQ,EAAE;AANN,WAAD,CAAL;AAQF;AACD,OAxBH,WAyBS,UAAC,KAAD,EAAW;AAChB,QAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACD,OA3BH;AA4BD;AAlDM;AAZI,CAAf","sourcesContent":["<template>\n  <div class=\"page-recharge\">\n    <div class=\"columns is-mobile\">\n      <div class=\"column is-half is-offset-one-quarter\">\n        <div class=\"field\">\n          <h1 class=\"title\">账户充值</h1>\n          <label>我的余额</label>\n          <div class=\"control\">\n            <input type=\"text\" class=\"input\" v-model=\"account.balance\" readonly />\n          </div>\n        </div>\n        <form @submit.prevent=\"submitForm\">\n          <div class=\"field\">\n            <label>充值金额</label>\n            <div class=\"control\">\n              <input type=\"text\" class=\"input is-primary\" v-model=\"added\" />\n            </div>\n          </div>\n          <div class=\"field\">\n            <div class=\"control\">\n              <button class=\"button is-dark\">确认充值</button>\n            </div>\n          </div>\n        </form>\n        <hr />\n        <div class=\"button is-link\" @click=\"push_fundsflow()\">账户流水</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import axios from \"axios\";\n  import { toast } from \"bulma-toast\";\n  export default {\n    name: \"Recharge\",\n    data() {\n      return {\n        added: 0,\n        account: {},\n      };\n    },\n    mounted() {\n      document.title = \"用户充值\";\n      this.getBalance();\n    },\n    methods: {\n      push_fundsflow() {\n        var url = \"/funds-flow/\" + this.id;\n        this.$router.push({ path: url });\n      },\n      //获取余额\n      getBalance() {\n        var formData = {\n          authorize: JSON.parse(localStorage.getItem(\"authorize\") || \"{}\"),\n        };\n        axios.post(\"/api/account\", formData).then((response) => {\n          this.account = response.data.account;\n        });\n        console.log(this.account);\n      },\n      //提交新增金额\n      submitForm() {\n        var formData = {\n          authorize: JSON.parse(localStorage.getItem(\"authorize\") || \"{}\"),\n          account_id: this.account.id,\n          amount: this.added,\n        };\n        axios\n          .post(\"/api/account/charge\", formData)\n          .then((response) => {\n            console.log(formData);\n            this.getBalance();\n            if (response.status == 200) {\n              toast({\n                message: \"充值成功！\",\n                type: \"is-success\",\n                dismissible: true,\n                pauseOnHover: true,\n                duration: 2000,\n                position: \"bottom-right\",\n              });\n            } else {\n              toast({\n                message: response.data.message,\n                type: \"warning\",\n                dismissible: true,\n                pauseOnHover: true,\n                duration: 2000,\n                position: \"bottom-right\",\n              });\n            }\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      },\n    },\n  };\n</script>\n"],"sourceRoot":""}]}