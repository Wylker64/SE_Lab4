{"remainingRequest":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/babel-loader/lib/index.js!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/App.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/App.vue","mtime":1684505240938},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/babel-loader/lib/index.js","mtime":1681917295923},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1681917297993}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJzdG9yYWdlIiwgZnVuY3Rpb24gKCkgewogIGlkZW50aXR5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImlkZW50aXR5Iik7Cn0pOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dNb2JpbGVNZW51OiBmYWxzZSwKICAgICAgaWRlbnRpdHk6ICItMSIsCiAgICAgIG5hbWU6ICIiLAogICAgICB3YXk6ICIiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbG9nT3V0OiBmdW5jdGlvbiBsb2dPdXQoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOwogICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0KICB9LAogIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlKCkgewogICAgdGhpcy4kc3RvcmUuY29tbWl0KCJpbml0aWFsaXplU3RvcmUiKTsKICAgIHZhciB0b2tlbiA9IHRoaXMuJHN0b3JlLnN0YXRlLnRva2VuOwoKICAgIGlmICh0b2tlbikgewogICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdID0gIlRva2VuICIgKyB0b2tlbjsKICAgIH0gZWxzZSB7CiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gPSAiIjsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmlkZW50aXR5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImlkZW50aXR5Iik7CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhvcml6ZSIpKSB0aGlzLm5hbWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhdXRob3JpemUiKSkudXNlcm5hbWU7IC8vIGxldCBfdGhpcyA9IHRoaXM7CiAgICAvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigic2V0SXRlbUV2ZW50IiwgZnVuY3Rpb24oZSkgewogICAgLy8gICBpZiAoZS5rZXkgPT09ICJpZGVudGl0eSIpIHsKICAgIC8vICAgICBjb25zb2xlLmxvZyhlLm5ld1ZhbHVlKTsKICAgIC8vICAgICBfdGhpcy5pZGVudGl0eSA9IGUubmV3VmFsdWU7CiAgICAvLyAgIH0KICAgIC8vICAgaWYgKGUua2V5ID09PSAiYXV0aG9yaXplZCIpIHsKICAgIC8vICAgICBjb25zb2xlLmxvZyhlLm5ld1ZhbHVlKTsKICAgIC8vICAgICBfdGhpcy5uYW1lID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXV0aG9yaXplIikpLnVzZXJuYW1lOwogICAgLy8gICB9CiAgICAvLyB9KTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjYXJ0VG90YWxMZW5ndGg6IGZ1bmN0aW9uIGNhcnRUb3RhbExlbmd0aCgpIHsKICAgICAgdmFyIHRvdGFsTGVuZ3RoID0gMDsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jYXJ0Lml0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdG90YWxMZW5ndGggKz0gdGhpcy5jYXJ0Lml0ZW1zW2ldLnF1YW50aXR5OwogICAgICB9CgogICAgICByZXR1cm4gdG90YWxMZW5ndGg7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/App.vue"],"names":[],"mappings":";AAwFE,OAAO,KAAP,MAAkB,OAAlB;AACA,MAAM,CAAC,gBAAP,CAAwB,SAAxB,EAAmC,YAAM;AACvC,EAAA,QAAO,GAAI,YAAY,CAAC,OAAb,CAAqB,UAArB,CAAX;AACD,CAFD;AAGA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO;AACL,MAAA,cAAc,EAAE,KADX;AAEL,MAAA,QAAQ,EAAE,IAFL;AAGL,MAAA,IAAI,EAAE,EAHD;AAIL,MAAA,GAAG,EAAE;AAJA,KAAP;AAMD,GARY;AASb,EAAA,OAAO,EAAE;AACP,IAAA,MADO,oBACE;AACP,MAAA,YAAY,CAAC,KAAb;AACA,MAAA,QAAQ,CAAC,MAAT;AACD;AAJM,GATI;AAeb,EAAA,YAfa,0BAeE;AACb,SAAK,MAAL,CAAY,MAAZ,CAAmB,iBAAnB;AACA,QAAM,KAAI,GAAI,KAAK,MAAL,CAAY,KAAZ,CAAkB,KAAhC;;AAEA,QAAI,KAAJ,EAAW;AACT,MAAA,KAAK,CAAC,QAAN,CAAe,OAAf,CAAuB,MAAvB,CAA8B,eAA9B,IAAiD,WAAW,KAA5D;AACF,KAFA,MAEO;AACL,MAAA,KAAK,CAAC,QAAN,CAAe,OAAf,CAAuB,MAAvB,CAA8B,eAA9B,IAAiD,EAAjD;AACF;AACD,GAxBY;AAyBb,EAAA,OAzBa,qBAyBH;AACR,SAAK,QAAL,GAAgB,YAAY,CAAC,OAAb,CAAqB,UAArB,CAAhB;AACA,QAAI,YAAY,CAAC,OAAb,CAAqB,WAArB,CAAJ,EAAuC,KAAK,IAAL,GAAY,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,WAArB,CAAX,EAA8C,QAA1D,CAF/B,CAIR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,GAxCY;AAyCb,EAAA,QAAQ,EAAE;AACR,IAAA,eADQ,6BACU;AAChB,UAAI,WAAU,GAAI,CAAlB;;AAEA,WAAK,IAAI,CAAA,GAAI,CAAb,EAAgB,CAAA,GAAI,KAAK,IAAL,CAAU,KAAV,CAAgB,MAApC,EAA4C,CAAC,EAA7C,EAAiD;AAC/C,QAAA,WAAU,IAAK,KAAK,IAAL,CAAU,KAAV,CAAgB,CAAhB,EAAmB,QAAlC;AACF;;AAEA,aAAO,WAAP;AACD;AATO;AAzCG,CAAf","sourcesContent":["<template>\n  <div id=\"wrapper\">\n    <nav class=\"navbar is-dark\" role=\"navigation\" aria-label=\"main navigation\">\n      <div class=\"navbar-brand\">\n        <router-link to=\"/\" class=\"navbar-item\"><strong>E-Commerce</strong></router-link>\n      </div>\n      <div id=\"navbarBasicExample\" class=\"navbar-menu\">\n        <div v-if=\"identity == 2\" class=\"navbar-start\">\n          <a class=\"navbar-item\" href=\"/admin\">\n            管理员账户\n          </a>\n          <a class=\"navbar-item\" href=\"/review\">\n            审查店铺\n          </a>\n          <a class=\"navbar-item\" href=\"/review-product\">\n            审查商品\n          </a>\n          <a class=\"navbar-item\" href=\"/promotion\">\n            活动列表\n          </a>\n        </div>\n\n        <div v-if=\"identity == 0\" class=\"navbar-start\">\n          <a class=\"navbar-item\" href=\"/personal-info\">\n            个人资料\n          </a>\n          <a class=\"navbar-item\" href=\"/cart\">\n            购物车\n          </a>\n          <a class=\"navbar-item\" href=\"/recharge\">\n            账户充值\n          </a>\n          <a class=\"navbar-item\" href=\"/my-orders\">\n            我的订单\n          </a>\n        </div>\n\n        <div v-if=\"identity == 1\" class=\"navbar-start\">\n          <a class=\"navbar-item\" href=\"/personal-info\">\n            个人资料\n          </a>\n          <a class=\"navbar-item\" href=\"/cart\">\n            购物车\n          </a>\n          <a class=\"navbar-item\" href=\"/recharge\">\n            账户充值\n          </a>\n          <a class=\"navbar-item\" href=\"/my-shops\">\n            我的商店\n          </a>\n          <a class=\"navbar-item\" href=\"/my-orders\">\n            我的订单\n          </a>\n        </div>\n      </div>\n\n      <div class=\"navbar-end\">\n        <div class=\"navbar-end\">\n          <div class=\"navbar-item\">{{ name }}</div>\n        </div>\n        <div v-if=\"name != ''\" class=\"navbar-item\">\n          <div class=\"button is-danger\" @click=\"logOut\">\n            退出登录\n          </div>\n        </div>\n        <div class=\"navbar-item\">\n          <div class=\"buttons\">\n            <a class=\"button is-primary\" href=\"/sign-up\">\n              <strong>注册</strong>\n            </a>\n            <a class=\"button is-light\" href=\"/log-in\">\n              登陆\n            </a>\n          </div>\n        </div>\n      </div>\n    </nav>\n    <div class=\"is-loading-bar has-text-centered\" v-bind:class=\"{ 'is-loading': $store.state.isLoading }\">\n      <div class=\"lds-dual-ring\"></div>\n    </div>\n\n    <section class=\"section\">\n      <router-view />\n    </section>\n  </div>\n</template>\n\n<script>\n  import axios from \"axios\";\n  window.addEventListener(\"storage\", () => {\n    identity = localStorage.getItem(\"identity\");\n  });\n  export default {\n    data() {\n      return {\n        showMobileMenu: false,\n        identity: \"-1\",\n        name: \"\",\n        way: \"\",\n      };\n    },\n    methods: {\n      logOut() {\n        localStorage.clear();\n        location.reload();\n      },\n    },\n    beforeCreate() {\n      this.$store.commit(\"initializeStore\");\n      const token = this.$store.state.token;\n\n      if (token) {\n        axios.defaults.headers.common[\"Authorization\"] = \"Token \" + token;\n      } else {\n        axios.defaults.headers.common[\"Authorization\"] = \"\";\n      }\n    },\n    mounted() {\n      this.identity = localStorage.getItem(\"identity\");\n      if (localStorage.getItem(\"authorize\")) this.name = JSON.parse(localStorage.getItem(\"authorize\")).username;\n\n      // let _this = this;\n      // window.addEventListener(\"setItemEvent\", function(e) {\n      //   if (e.key === \"identity\") {\n      //     console.log(e.newValue);\n      //     _this.identity = e.newValue;\n      //   }\n      //   if (e.key === \"authorized\") {\n      //     console.log(e.newValue);\n      //     _this.name = JSON.parse(localStorage.getItem(\"authorize\")).username;\n      //   }\n      // });\n    },\n    computed: {\n      cartTotalLength() {\n        let totalLength = 0;\n\n        for (let i = 0; i < this.cart.items.length; i++) {\n          totalLength += this.cart.items[i].quantity;\n        }\n\n        return totalLength;\n      },\n    },\n  };\n</script>\n\n<style lang=\"scss\">\n  @import \"../node_modules/bulma\";\n\n  .lds-dual-ring {\n    display: inline-block;\n    width: 80px;\n    height: 80px;\n  }\n\n  .lds-dual-ring:after {\n    content: \" \";\n    display: block;\n    width: 64px;\n    height: 64px;\n    margin: 8px;\n    border-radius: 50%;\n    border: 6px solid #ccc;\n    border-color: #ccc transparent #ccc transparent;\n    animation: lds-dual-ring 1.2s linear infinite;\n  }\n\n  @keyframes lds-dual-ring {\n    0% {\n      transform: rotate(0deg);\n    }\n\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n\n  .is-loading-bar {\n    height: 0;\n    overflow: hidden;\n\n    -webkit-transition: all 0.3s;\n    transition: all 0.3s;\n\n    &.is-loading {\n      height: 80px;\n    }\n  }\n</style>\n"],"sourceRoot":""}]}