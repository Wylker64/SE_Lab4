{"remainingRequest":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/babel-loader/lib/index.js!/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/src/views/LogIn.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/src/views/LogIn.vue","mtime":1680535123944},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1680535122212},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/babel-loader/lib/index.js","mtime":1680535122151},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1680535122212},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1680535123815}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9iaXl1bnRpYW4vRGVza3RvcC9zb2Z0d2FyZSBlbmdpbmVlcmluZy9naXQvbGFiXzMvbGFiMy9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdidWxtYS10b2FzdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9nSW4nLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VybmFtZTogJycsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgZXJyb3JzOiBbXSwKICAgICAgdXNlcmlkOiAnJywKICAgICAgaWRlbnRpdHk6ICcnCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGRvY3VtZW50LnRpdGxlID0gJ+eZu+mZhic7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZm9ybURhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXSA9ICIiOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInRva2VuIik7CgogICAgICAgICAgICAgICAgX3RoaXMuZXJyb3JzLnNwbGljZSgwKTsKCiAgICAgICAgICAgICAgICBpZiAoIShfdGhpcy51c2VybmFtZS5sZW5ndGggPT09IDAgfHwgX3RoaXMucGFzc3dvcmQgPT09IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcnMucHVzaCgi55So5oi35ZCN5oiW5a+G56CB5LiN5b6X5Li656m6Iik7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGZvcm1EYXRhID0gewogICAgICAgICAgICAgICAgICB1c2VybmFtZTogX3RoaXMudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBfdGhpcy5wYXNzd29yZAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hcGkvbG9naW4nLCBmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMudXNlcmlkID0gcmVzcG9uc2UuZGF0YS51c2VyaWQ7CiAgICAgICAgICAgICAgICAgIF90aGlzLmlkZW50aXR5ID0gcmVzcG9uc2UuZGF0YS5pZGVudGl0eTsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXV0aG9yaXplJywgSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBfdGhpcy51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgICBpZDogX3RoaXMudXNlcmlkCiAgICAgICAgICAgICAgICAgIH0pKTsgLy8gY29uc3QgdG9rZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidXJsIikudmFsdWUKICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRUb2tlbicsIHRva2VuKQogICAgICAgICAgICAgICAgICAvLyBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdID0gIlRva2VuICIgKyB0b2tlbgogICAgICAgICAgICAgICAgICAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCB0b2tlbikKCiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgdG9hc3QoewogICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+eZu+mZhuaIkOWKn++8gScsCiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaXMtc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICBkaXNtaXNzaWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwLAogICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdib3R0b20tcmlnaHQnCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChTdHJpbmcoX3RoaXMuaWRlbnRpdHkpID09ICcwJykgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHRvUGF0aCA9IF90aGlzLiRyb3V0ZS5xdWVyeS50byB8fCAnL2hvbWUnOyAvLyB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEJ1eWVyJywgdG9rZW4pCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoU3RyaW5nKF90aGlzLmlkZW50aXR5KSA9PSAnMScpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciB0b1BhdGggPSBfdGhpcy4kcm91dGUucXVlcnkudG8gfHwgJy93YXJlaG91c2UnOwogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codG9QYXRoKTsgLy8gdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRTZWxsZXInLCB0b2tlbikKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChTdHJpbmcoX3RoaXMuaWRlbnRpdHkpID09ICcyJykgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHRvUGF0aCA9IF90aGlzLiRyb3V0ZS5xdWVyeS50byB8fCAnL3Jldmlldyc7IC8vIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0QWRtaW4nLCB0b2tlbikKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh0b1BhdGgpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRvYXN0KHsKICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLnN0YXR1cywKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgICAgICAgICAgICAgIGRpc21pc3NpYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDAsCiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1yaWdodCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIC8vIGZvciAoY29uc3QgcHJvcGVydHkgaW4gZXJyb3IucmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcnMucHVzaChlcnJvci5yZXNwb25zZS5kYXRhKTsgLy8gfQoKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcnMucHVzaCgnU29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4nKTsKCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/biyuntian/Desktop/software engineering/git/lab_3/lab3/frontend/src/views/LogIn.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"page-log-in\">\n        <div class=\"columns\">\n            <div class=\"column is-4 is-offset-4\">\n                <h1 class=\"title\">登陆</h1>\n\n                <form @submit.prevent=\"submitForm\">\n\n                    <div class=\"field\">\n                        <label>用户名</label>\n                        <div class=\"control\">\n                            <input type=\"text\" class=\"input\" v-model=\"username\">\n                        </div>\n                    </div>\n\n                    <div class=\"field\">\n                        <label>密码</label>\n                        <div class=\"control\">\n                            <input type=\"password\" class=\"input\" v-model=\"password\">\n                        </div>\n                    </div>\n\n                    <div class=\"notification is-danger\" v-if=\"errors.length\">\n                        <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                    </div>\n\n                    <div class=\"field\">\n                        <div class=\"control\">\n                            <button class=\"button is-dark\">登陆</button>\n                        </div>\n                    </div>\n\n                    <hr>\n\n                    <router-link to=\"/\">点击这里</router-link> 去注册!\n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { toast } from 'bulma-toast'\nexport default {\n    name: 'LogIn',\n    data() {\n        return {\n            username: '',\n            password: '',\n            errors: [],\n            userid: '',\n            identity: ''\n        }\n    },\n    mounted() {\n        document.title = '登陆'\n    },\n    methods: {\n        async submitForm() {\n            axios.defaults.headers.common[\"Authorization\"] = \"\"\n\n            localStorage.removeItem(\"token\")\n            this.errors.splice(0)\n            if (this.username.length === 0||this.password === 0) {\n              this.errors.push(\"用户名或密码不得为空\")\n              return\n            } \n            const formData = {\n                username: this.username,\n                password: this.password\n            }\n\n            await axios\n                .post('/api/login', formData)\n                .then(response => {\n                    this.userid = response.data.userid;\n                    this.identity = response.data.identity;\n                    console.log(response);\n                    \n                    localStorage.setItem('authorize', JSON.stringify({username: this.username, id: this.userid}));\n                    // const token = document.getElementById(\"url\").value\n\n                    // this.$store.commit('setToken', token)\n                    \n                    // axios.defaults.headers.common[\"Authorization\"] = \"Token \" + token\n\n                    // localStorage.setItem(\"token\", token)\n                    if (response.status == 200){\n                        toast({\n                            message: '登陆成功！',\n                            type: 'is-success',\n                            dismissible: true,\n                            pauseOnHover: true,\n                            duration: 2000,\n                            position: 'bottom-right',\n                            \n                        })\n                        if (String(this.identity) == '0'){\n                        var toPath = this.$route.query.to || '/home'\n                        // this.$store.commit('setBuyer', token)\n                    }\n                    if (String(this.identity) == '1'){\n                        var toPath = this.$route.query.to || '/warehouse'\n                        console.log(toPath)\n                        // this.$store.commit('setSeller', token)\n                    }                    \n                    if (String(this.identity) == '2'){\n                        var toPath = this.$route.query.to || '/review'\n                        // this.$store.commit('setAdmin', token)\n                    }  \n                    this.$router.push(toPath)\n                } else{\n                            toast({\n                            message: response.status,\n                            type: 'warning',\n                            dismissible: true,\n                            pauseOnHover: true,\n                            duration: 2000,\n                            position: 'bottom-right',\n                            \n                        })\n\n                        }\n                })\n                .catch(error => {\n                    if (error.response) {\n                        // for (const property in error.response.data) {\n                            console.log(error.response.data)\n                            this.errors.push(error.response.data)\n                        // }\n                    } else {\n                        this.errors.push('Something went wrong. Please try again')\n                        console.log(error.response)\n                    }\n                })\n        }\n    }\n}\n</script>"],"sourceRoot":""}]}