{"remainingRequest":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/components/ShopBox.vue?vue&type=style&index=0&id=4bb12316&scoped=true&lang=css","dependencies":[{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/components/ShopBox.vue","mtime":1682250747553},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/css-loader/dist/cjs.js","mtime":1681917296340},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1681917297994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/postcss-loader/src/index.js","mtime":1681917297263},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1681917295994},{"path":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1681917297993}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgLmltYWdlIHsKICAgIG1hcmdpbi10b3A6IC0xLjI1cmVtOwogICAgbWFyZ2luLWxlZnQ6IC0xLjI1cmVtOwogICAgbWFyZ2luLXJpZ2h0OiAtMS4yNXJlbTsKICB9Cg=="},{"version":3,"sources":["/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/components/ShopBox.vue"],"names":[],"mappings":";EAmHE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACxB","file":"/Users/biyuntian/Desktop/software engineering/git/lab_4/Lab4/frontend/src/components/ShopBox.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"column is-3\">\n    <div class=\"box\">\n      <h3 v-if=\"is_admin\" class=\"is-size-4\">ID: {{ shop.id }}</h3>\n      <h3 class=\"is-size-4\">名称：{{ shop.name }}</h3>\n      <p class=\"is-size-6 has-text-grey\">类型：{{ shop.type }}</p>\n      <p v-if=\"is_user || is_admin\" class=\"is-size-6 has-text-grey\">描述：{{ shop.description }}</p>\n      <p v-if=\"is_admin\" class=\"is-size-6 has-text-grey\">地址：{{ shop.address }}</p>\n      <!-- 若从/my-shops点击则跳转到商店管理界面/warehouse -->\n      <button v-if=\"is_seller && shop.approved\" @click=\"push_warehouse\" class=\"button is-dark mt-4\">\n        前往\n      </button>\n      <button v-if=\"is_seller && !shop.approved\" @click=\"push_warehouse\" class=\"button is-dark mt-4\" disabled>\n        前往\n      </button>\n      <!-- 若从/home点击则跳转到商店展示界面/shop -->\n      <button v-if=\"is_user\" @click=\"push_shop\" class=\"button is-dark mt-4\">前往</button>\n      <button v-if=\"is_admin\" @click=\"release(true)\" class=\"button mt-4\">\n        通过申请\n      </button>\n      <button v-if=\"is_admin\" @click=\"release(false)\" class=\"button mt-4\">\n        拒绝申请\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\n  import axios from \"axios\";\n  // import { numberLiteralTypeAnnotation } from \"@babel/types\";\n  export default {\n    name: \"ShopBox\",\n    data() {\n      return {\n        // movie: this.$store.state.shop,\n        errors: [],\n        approved: false,\n      };\n    },\n    methods: {\n      push_shop() {\n        var url = \"/shop/\" + this.shop.id;\n        this.$router.push({ path: url });\n        console.log(this.shop);\n      },\n      push_warehouse() {\n        var url = \"/warehouse/\" + this.shop.id;\n        this.$router.push({ path: url });\n        console.log(this.shop);\n      },\n      release(approved) {\n        this.errors = [];\n        var formData = {\n          authorize: JSON.parse(localStorage.getItem(\"authorize\") || \"{}\"),\n          shop_id: this.shop.id,\n          approved: approved,\n        };\n        console.log(this.review);\n        var url;\n        if (this.review === \"open\") url = \"/api/shop/approval\";\n        else if (this.review === \"delete\") url = \"api/shop/delete/approval\";\n        axios\n          .post(url, formData)\n          .then((response) => {\n            console.log(response);\n            if (response.status == 200) {\n              toast({\n                message: \"商店审核通过！\",\n                type: \"is-success\",\n                dismissible: true,\n                pauseOnHover: true,\n                duration: 2000,\n                position: \"center\",\n              });\n            } else {\n              toast({\n                message: response.status,\n                type: \"warning\",\n                dismissible: true,\n                pauseOnHover: true,\n                duration: 2000,\n                position: \"center\",\n              });\n            }\n          })\n          .catch((error) => {\n            console.log(error.response);\n            if (error.response) {\n              this.errors.push(error.response.data);\n              console.log(JSON.stringify(error.response));\n            } else if (error.message) {\n              this.errors.push(\"Something went wrong. Please try again\");\n              console.log(JSON.stringify(error.response));\n            }\n          });\n      },\n    },\n    created() {\n      if (this.type === \"1\") {\n        this.is_seller = true;\n      } else if (this.type === \"2\") {\n        this.is_user = true;\n      } else if (this.type === \"0\") {\n        this.is_admin = true;\n      }\n    },\n    props: {\n      shop: { type: Object },\n      type: { type: String },\n      review: { type: String },\n    },\n  };\n</script>\n\n<style scoped>\n  .image {\n    margin-top: -1.25rem;\n    margin-left: -1.25rem;\n    margin-right: -1.25rem;\n  }\n</style>\n"]}]}